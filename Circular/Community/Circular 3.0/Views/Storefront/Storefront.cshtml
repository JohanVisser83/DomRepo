@model CircularWeb.Models.StorefrontModel;
@{
    Layout = "_Layout";
}
<style>
    .ui-menu li.ui-menu-item .ui-menu-item-wrapper {
        border-radius: unset;
    }

    .ui-widget.ui-widget-content {
        box-shadow: none;
        background: #ECECEC;
        color: #101C28;
        font-size: 14px;
        font-weight: 500;
    }
</style>
<div class="col-lg-11 col-md-11  col-sm-10 col-10">
    <div class="body-content">


        <div class="row">
            <div class="col-lg-2">
                <div class="sidebar mt-38">
                    @*<p>Add a store</p>*@
                    <ul class="nav nav-tabs tab-data message-tab">
                        <li><p class="tab-text">Select Store</p></li>
                    </ul>
                    @* <select class="form-control h-20 p-0  bg-transparent border-0" id="ddlStoreDropdown">*@

                    <select class="form-control h-20 p-0 fw-600 bg-transparent border-0" id="ddlStoreDropdown" asp-items="@(new SelectList(Model.StoreData,"Id","StoreDisplayName"))">

                        @*<option value="0">Select Store </option>*@

                    </select>


                    <ul class="nav nav-tabs tab-data message-tab">
                        
                        <li><a  data-toggle="tab" href="#POSsystem" class="active">POS system</a></li>
                       
                        <li><a data-toggle="tab" href="#SalesTransactions">Sales transactions </a></li>
                        <li><a data-toggle="modal" href="#ProcessRefund">Process a refund</a></li>
                        <li><p class="tab-text">Manage Store</p></li>
                        <li><a data-toggle="tab" href="#StockInventory">Stock and inventory</a></li>
                        <li><a data-toggle="modal" href="#updateStore" id="editstoredetails">Edit store details</a></li>
                        <li><a data-toggle="modal" href="#AddCategory">Add a category</a></li>
                        <li><a data-toggle="modal" href="#AddProduct">Add a product</a></li>
                        <li><a data-toggle="tab" href="#TimeSlots">Pre-ordering time slots</a></li>
                        <li><a data-toggle="tab" href="#deletestore" onclick="deleteStoreActive()">Delete a store </a></li>


                    </ul>
                </div>


            </div>
            <div class="col-lg-10">

                <div class="tab-content mb-4">
                    <!-- @* =====Custom Groups =====*@ -->
                    <div id="POSsystem" class="tab-pane fade new-event active show ">
                        <div class="safty-top-area">
                            <div class="row  justify-content-end">
                                
                                
                                <div class=""> <a data-toggle="modal" href="#AddStore" class="btn btn-lumo-green"><span class="mr-1">+</span>Add a store</a></div>
                                <div class=" cross-icon text-right  cross-relative planner-cross pl-0">

                                    <button type="button" class="cross ml-3" id="poscrossbtn">
                                        <span aria-hidden="true">×</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="row ">
                            <!-- Users box-->
                            <div class="col-xl-8 col-lg-8 ">
                                <div class="border-bx-area">
                                    <div class="top-headarea">
                                        <p class="bg-box bg-blue text-white mb-0">POS</p>
                                    </div>

                                    <div class="storefont-category h-167px overflow-auto">
                                        <h6 class="p-2 fw-600 mb-0 bg-gray px-4">Categries</h6>

                                        <div class="circle-box  demo " id="PosCategory">

                                            <ul>

                                                @foreach (var item in Model.ListCategoryData)
                                                {

                                                    <li>
                                                        <a href="#" class="">
                                                            <div class="circle-icon" id="@item.Id" onclick="fnGetProduct(@item.Id)"><img src="@item.Icon" class="store-img" /></div>
                                                            <span>@item.CategoryName</span>

                                                        </a>

                                                    </li>
                                                }
                                            </ul>

                                        </div>

                                        <div class="vehicle-list-storefont ">
                                            <h6 class="p-2 fw-600 mb-0 bg-gray px-4">Products</h6>
                                            <div class="circle-box" id="POSProductDetail">
                                                <ul>
                                                    @if (Model.Listofproducts != null)
                                                    {
                                                        foreach (var items in Model.Listofproducts)
                                                        {
                                                            <li>
                                                                <a href="#" class="">
                                                                    <div class="circle-icon" data-id="@items.Id" data-id1="@items.SellingPrice"><img src="@items?.Images[0]?.ImagePath" class="store-img" /></div>
                                                                    <span class="span">
                                                                        @items.ProductName

                                                                    </span>
                                                                    <div class="font-weight-bold fs-16" id="SellingPrice">


                                                                        <h6>@Model.currencyModel.CurrencyCode @items.SellingPrice</h6>
                                                                    </div>
                                                                </a>


                                                            </li>
                                                        }
                                                    }


                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-xl-4 col-lg-4 ">
                                <div class="border-bx-area">

                                    <div class="top-headarea">
                                        <p class="bg-box bg-blue text-lumo mb-0">Cart</p>
                                        <div class="username-bx ">
                                            <a onclick="ClearCart()" href="#" class=""></a>
                                        </div>
                                    </div>

                                    <div class="unread-message-box storefront-left h-170px overflow-auto " id="dvCart">
                                        <ul class="">
                                            @if (Model.ListOfCart != null && Model.ListOfCart.Count() > 0)
                                            {

                                                @foreach (var items in Model.ListOfCart)
                                                {
                                                    <li>
                                                        <div class="d-flex justify-content-between align-content-center">
                                                            <input type="hidden" id="hdnProductID" value="@items.ProductId" />

                                                            <div class="username-bx">
                                                                @items.ProductName
                                                            </div>

                                                            <div class="d-flex align-items-center countcontainer">
                                                                <div class="counter">
                                                                    @* <input class="counter__input count" type="text" value="1" name="counter" id="btnincreaseCount" size="5" readonly="readonly" />
                                                            <a class="counter__increment valueCount" id="btnplus" data-factor="+1" href="#">+</a>
                                                            <a class="counter__decrement valueCount" id="btnMinus" href="#" data-factor="-1">&ndash;</a>*@
                                                                </div>
                                                                <div class="username-bx" id="dvamount">
                                                                    @Model.currencyModel.CurrencyCode  @items.Amount
                                                                </div>

                                                            </div>
                                                        </div>


                                                    </li>
                                                }
                                            }




                                        </ul>

                                    </div>

                                    <div class="d-flex justify-content-between align-content-center bg-lumo px-3 py-3 border-radius-bottom" onclick="fnGetPOSCartDetail()">


                                        <div class="username-bx font-weight-bold cursor-pointer">
                                            Checkout <span id="Checkoutitems"> (  items)</span>
                                        </div>

                                        <div>
                                            <span class="username-bx font-weight-bold">@Model.currencyModel.CurrencyCode</span>
                                            <span class="username-bx font-weight-bold" id="checkoutPrice">
                                            </span>
                                        </div>



                                    </div>

                                   
                                </div>
                                <div class="border-bx-area ">
                                    <div class="top-headarea">
                                        <p class="bg-box bg-blue text-white mb-0">Pre-ordered items</p>
                                    </div>
                                    <div class="form-group search-bar-list p-3 pb-0">
                                        <div class=" input-group diff">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <img src="~/images/Search-2.png" class="img-fluid">
                                                </span>
                                            </div>
                                            <input class="form-control search text-center" id="txtSearchPreorder" type="search" placeholder="Search pre-ordered items">

                                        </div>

                                    </div>
                                    <div class="unread-message-box h-67vh overflow-auto">
                                        
                                        
                                        <div id="dvCustomeramount" class="">
                                      
                                            <ul class="">
                                            </ul>
                                        </div>
                                    </div>
                                    </div>
                                
                            </div>
                            

                            <!-- Chat Box-->
                            
                        </div>




                    </div>
                    <!-- @*==end===*@ -->
                    <!-- @* =====Stock and inventory=====*@ -->
                    <div id="StockInventory" class="tab-pane fade  ">
                        <div class="safty-top-area">
                            <div class="row align-items-center">
                                <div class="col-md-4 ">
                                    <div class=" form-group search-bar-list px-3">
                                        <div class=" input-group diff">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <img src="~/images/Search-2.png" class="img-fluid">
                                                </span>
                                            </div>
                                            <input class="form-control search " type="text" placeholder="Search for a product" id="SearchProduct">

                                        </div>

                                    </div>
                                </div>


                                <div class="ml-auto cross-icon text-right  cross-relative planner-cross">
                                    <button type="button" id="btnExportCSV" class="btn btn-link" onclick="exportCSVExcelProduct()"><span class="mr-2"><img src="~/images/Black-Download.png"></span>Export CSV</button>
                                    <button type="button" class="cross ml-3" id="Stockcrossbtn">
                                        <span aria-hidden="true">×</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- For UpcomingEvent purpose-->
                        <!-- Users box-->
                        <div class=" border-bx-area border-0">
                            <div class="table-responsive">
                                <table id="InventoryList" class="table ">
                                    <thead>
                                        <tr>
                                            <th>Product name</th>
                                            <th>Category name</th>

                                            <th>Selling price</th>
                                            <th>Qty</th>
                                            <th>Threshold</th>
                                            <th>Status</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody id="InventoryTable">
                                        @if (Model.ListProductData != null && Model.ListProductData.Count() > 0)
                                        {
                                            @foreach (var items in Model.ListProductData.OrderByDescending(i => i.Id).ToList())
                                            {
                                                <tr>
                                                    <td>
                                                        <span class="mr-3" data-target="#EditProduct" data-toggle="modal" onclick="GetEditValue(@items.Id)"><input type="hidden" id="hdnDeleteid" value="@items.Id" /><img src="~/images/Edit-Square.png">&nbsp;&nbsp;@items.Product</span>
                                                        <input type="hidden" id="hdnDeleteid" value="@items.Id" />
                                                        <input type="hidden" id="hdncatt" value="@items.CategoryId" />
                                                        <input type="hidden" id="hdnprodcst" value="@items.Productcost" />
                                                        <input type="hidden" id="hdnprodcsts" value="@items.Id" />

                                                    </td>
                                                    @*  <td><span class="" data-target="#EditProducts" data-toggle="modal"><img onclick="GetEditproduct(@items.Id)" src="~/images/Edit-Square.png"></span></td>*@
                                                    <td>@items.categoryName</td>
                                                    <td>@Model.currencyModel.CurrencyCode @items.Productcost</td>
                                                    <td>@items.Quantity   <span class="" data-target="#EditProducts" data-toggle="modal"><img onclick="GetEditproduct(@items.Id)" src="~/images/Edit-Square.png"></span></td>
                                                    <td>@items.Threshold</td>
                                                    <td>@items.EntryStatus</td>


                                                    <td><span class="mr-3" onclick="GetDeleteValue(@items.Id)"><img src="~/images/Delete2.png"></span></td>

                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                    <!-- @*==end===*@ -->
                    <!-- @* =====Sales transactions =====*@ -->
                    <div id="SalesTransactions" class="tab-pane fade ">
                        <div class="safty-top-area  text-right pb-0">
                            <div class=" cross-icon   p-2 cross-relative planner-cross">

                                <button type="button" class="cross" id="Upcomingcross">
                                    <span aria-hidden="true">×</span>
                                </button>
                            </div>
                        </div>
                        <div class="top-safty-area">
                            <div class="d-flex justify-content-between head-sales align-items-center">
                                <h6 class="mb-0 fw-600">Cash Register</h6>
                                <div class=" btn btn-lumo-green " data-toggle="modal" data-target="#Mailbot"><span class="mr-2"><img src="~/images/line-message.png"></span>Email recon</div>
                            </div>
                            <div class="row px-3 mb-3">
                                <div class="col-md-3">
                                    <label>Total sales</label>

                                    <div class="price bg-white border-radius p-3" id="dvTotalPrice">
                                    </div>

                                </div>
                                <div class="col-md-3">
                                    <label>Wallet payments</label>

                                    <div class="price bg-white border-radius p-3" id="dvCircularPayment">
                                    </div>

                                </div>
                                <div class="col-md-3">
                                    <label>Cash sales</label>

                                    <div class="price bg-white border-radius p-3" id="dvCashSales">
                                    </div>

                                </div>
                                <div class="col-md-3">
                                    <div class="form-group ">
                                        <label><span id="lblStoreName"></span> Wallet balance</label>
                                        <input type="text" id="txtWalletballance" readonly="readonly" class="form-control bg-white text-center" placeholder="">
                                    </div>

                                </div>
                            </div>


                        </div>
                      


                        <!-- For Attendance Registry purpose-->
                        <!-- Users box-->
                        <div class=" border-bx-area ">
                            <div class="safty-top-area  pb-0">
                                <div class="d-flex justify-content-between head-sales align-items-center">
                                    <h6 class="mb-0 fw-600">Sales Register</h6>
                                    <button type="button" class="btn btn-link " onclick="exportCSVExcelbuyer()"><span class="mr-2 export-btn" ><img src="/images/Black-Download.png"></span>Export CSV</button>
                                </div>
                                <div class="row p-3 align-items-center">
                                    <div class="col-md-4">
                                        <div class="search-bar-list mt-3">
                                            <div class=" input-group diff">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <img src="~/images/Search-2.png" class="img-fluid">
                                                    </span>
                                                </div>
                                                <input class="form-control search " type="text" id="SearchbuyerList" placeholder="Search">

                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-4 text-center">
                                        <label>Start Date</label>
                                        <div class="form-group">

                                            <div class=" date-icon">
                                                <input type="text" id="datefrom" class="form-control  btn-date datepicker-icon">

                                            </div>
                                        </div>


                                    </div>
                                    <div class="col-md-4 text-center">
                                        <label>End Date</label>
                                        <div class="form-group">

                                            <div class=" date-icon">
                                                <input type="text" id="dateTo" class="form-control  btn-date datepicker-icon">

                                            </div>
                                        </div>


                                    </div>
                                    


                                </div>

                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="table-responsive ">
                                        <table class="table " id="sales-transactions">
                                            <thead>
                                                <tr>
                                                    <th>Type<span class="ml-2"></span></th>
                                                    <th>Buyer details</th>
                                                    <th>Date of purchase</th>
                                                    <th>Status <span class="ml-2"></span></th>
                                                    <th>Amount <span class="ml-2"></span></th>

                                                </tr>
                                            </thead>
                                            <tbody id="BuyerData">
                                                @*@foreach (var items in Model.ListOrderDetails)
                                                {
                                                <tr>
                                                <td>@items.BuyerName<span class="position-absolute ml-3" data-target="#OrderReview" data-toggle="modal"><img src="~/images/Show.png" onclick="fnGetBuyerDetail(@items.Id)"></span></td>
                                                <td>@items.Mobile</td>
                                                <td>@items.OrderDate</td>

                                                @if (@items.IsPaid == true)
                                                {
                                                <td> Paid </td>
                                                }
                                                else
                                                {
                                                <td>cash</td>
                                                }

                                                <td>@Model.currencyModel.CurrencyCode @items.Amount</td>

                                                </tr>
                                                }*@

                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                                 <!--<div class="col-lg-4">
                                     <div class=" border-bx-area">

                                         <div class="top-headarea">
                                             <p class="bg-box bg-blue text-lumo mb-0">Cash register</p>

                                         </div>



                                         <div class="unread-message-box mr-0 storefont-bx mt-0">

                                             <ul class="">
                                                 <li>
                                                     <a class="d-flex justify-content-between align-content-center py-4 border-bottom">

                                                         <div class="username-bx">
                                                             Total sales
                                                         </div>

                                                        
                                                     </a>

                                                 </li>
                                                 <li>
                                                     <a class="d-flex justify-content-between align-content-center" href="">


                                                         <div class="username-bx">
                                                             Circular payments
                                                         </div>

                                                         <div class="price" id="dvCircularPayment">
                                                         </div>
                                                     </a>
                                                 </li>
                                                 <li>
                                                     <a class="d-flex justify-content-between align-content-center" href="#">

                                                         <div class="username-bx">
                                                             Cash sales
                                                         </div>

                                                         <div class="price" id="dvCashSales">
                                                         </div>
                                                     </a>
                                                 </li>
                                                 <li>
                                                     <a class="d-flex justify-content-between align-content-center  py-4 border-top">

                                                         <div class="username-bx">
                                                             Total receipts
                                                         </div>

                                                         <div class="price" id="dvTotalRecipts">
                                                         </div>
                                                     </a>

                                                 </li>


                                                 <li>

                                                     <a class="d-flex justify-content-between align-content-center  py-4 border-top">

                                                         <div class="username-bx">
                                                             Difference
                                                         </div>

                                                         <div class="price" id="dvdiffrence">
                                                             R0.00
                                                         </div>
                                                     </a>

                                                 </li>
                                             </ul>
                                             <div class="top-headarea text-center">
                                                

                                             </div>

                                         </div>
                                     </div>
                                </div>-->
                            </div>
                        </div>

                    </div>
                    <!-- @*==end===*@ -->
                    <!-- @* ======Time Slots=====*@ -->
                    <div id="TimeSlots" class="tab-pane fade">
                        <!-- For demo purpose-->

                        <div class="col-lg-7">
                            <div class="cross-icon text-right d-block cross-relative planner-cross">

                                <button type="button" class="cross" id="precrossbtn">
                                    <span aria-hidden="true">×</span>
                                </button>
                            </div>
                            <div class="border-bx-area">

                                <div class="col-lg-12 p-6">
                                    <div class="form-group ">
                                        <label>What would you like to call this schedule?</label>@*data-toggle="modal" data-target="#Superjob"*@
                                        <input type="text" class="form-control" id="txtScheduleItem">
                                    </div>
                                    <div class="">

                                        <div class=" row">

                                            <div class="form-group col-md-6">
                                                <label>OPEN for pre-ordering</label>
                                                <input type="time" class="form-control" id="txtopenTime">
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label>CLOSED for pre-ordering</label>
                                                <input type="time" class="form-control" id="txtCloseTime">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Which days would you like to control the ordering time slots?</label>
                                        <div id="dvWeek" class="slot-area week">
                                            <div class="form-group">
                                                <input type="checkbox" class="ChkDays Addchk" id="mon" value="1" />
                                                <label for="mon" class="week-bx Days">Mon</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="tue" class="ChkDays Addchk" value="2" />
                                                <label for="tue" class="week-bx Days">Tue</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="wed" class="ChkDays Addchk" value="3" />
                                                <label for="wed" class="week-bx Days">Wed</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="thus" class="ChkDays Addchk" value="4" />
                                                <label for="thus" class="week-bx Days">Thu</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="fri" class="ChkDays Addchk" value="5" />
                                                <label for="fri" class="week-bx Days">Fri</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="sat" class="ChkDays Addchk" value="6" />
                                                <label for="sat" class="week-bx Days">Sat</label>
                                            </div>
                                            <div class="form-group">
                                                <input type="checkbox" id="sun" class="ChkDays Addchk" value="7" />
                                                <label for="sun" class="week-bx Days">Sun</label>
                                            </div>



                                        </div>
                                    </div>


                                    <div class="text-right">

                                        <button type="button" class="btn btn-lumo-green" id="btnAddSchedule">Add a new schedule</button>
                                    </div>
                                    <div class="active-timeslot-area">
                                        <h6 class="border-bottom border-gray">Active timeslots</h6>

                                        <div class="form-group mb-4" id="divpreorder">
                                            @*  @if (Model.ListProductData != null && Model.ListProductData.Count() > 0)
                                            {*@


                                        </div>

                                        @*<div class="form-group">
                                        <label>Second break schedule (10:30am - 11:30am) <img src="~/images/Edit-Square.png"></label>
                                        <div class="slot-area">
                                        <div class="week-bx week-sm active">Mon</div>
                                        <div class="week-bx week-sm active">Tue</div>
                                        <div class="week-bx week-sm active">Wed</div>
                                        <div class="week-bx week-sm active">Thu</div>
                                        <div class="week-bx week-sm">Fri</div>
                                        <div class="week-bx week-sm">Sat</div>
                                        <div class="week-bx week-sm">Sun</div>
                                        </div>
                                        </div>*@
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>
                    <!--  @* =====END=====*@ -->

                </div>
            </div>


        </div>
    </div>
</div>

<!-- @*======Add Store====*@ -->
<div class="modal fade modal-add-bx" id="AddStore" tabindex="-1" aria-labelledby="AddStoreLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Add a store</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Store name</label>
                            <input type="text" id="txtSroreName" pattern="[A-Z][a-z]* [A-Z][a-z]*" title="Please Enter first letter of capital" class="form-control">

                        </div>

                        <div class="form-group">
                            <label>Upload your store logo</label>
                            <div class=" add-icon-bx">
                                <input type="text" id="txtimageName" readonly="readonly" class="form-control">

                                <div class="add-icon">
                                    <input type="file" name="myfile" accept="image/*" id="StoreImage" onchange="readURL(this);" class="form-control">
                                    <img src="~/images/add-image-icon.png">
                                </div>
                            </div>


                        </div>


                    </div>
                    <div class="col-md-12 d-flex justify-content-between">
                        <small>Accepted formats: jpeg or png</small>
                        <button type="button" id="BtnAddStore" class="btn btn-lumo-green">Add a new store</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>

<div class="modal fade modal-add-bx" id="updateStore" tabindex="-1" aria-labelledby="AddStoreLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Update a store</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Store name</label>
                            <input type="text" id="txtStoreNames" class="form-control">

                        </div>

                        <div class="form-group">
                            <label>Upload your store logo</label>
                            <div class=" add-icon-bx">
                                <input type="text" id="txtimageNames" class="form-control">

                                <div class="add-icon">
                                    <input type="file" name="myfile" accept="image/*" id="StoreImages" onchange="readURL1(this);" class="form-control">
                                    <img src="~/images/add-image-icon.png">
                                </div>
                            </div>


                        </div>


                    </div>
                    <div class="col-md-12 d-flex justify-content-between">
                        <small>Accepted formats: jpeg or png</small>
                        <button type="button" id="BtnUpdateStore" class="btn btn-lumo-green">Update store</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end==== -->


<!-- @*======Add Category====*@ -->
<div class="modal fade modal-add-bx" id="AddCategory" tabindex="-1" aria-labelledby="AddStoreLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Add a category</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Category name</label>
                            <input type="text" id="txtCategoryName" class="form-control ">

                        </div>

                        <div class="form-group" id="categoryimg">
                            <label>Upload a display image</label>
                            <div class=" add-icon-bx">
                                <label id="txtCatImage" class="form-control"></label>
                                <div class="add-icon" style="margin-bottom: 8px;">
                                    <input type="file" name="myfile" id="CategoryImage" accept="image/*" onchange="CatgoryreadURL(this);" class="form-control">
                                    <img src="~/images/add-image-icon.png">
                                </div>
                            </div>

                        </div>


                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green" id="btnAddCategory">Add a new category</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->

<!-- @*======Add Product====*@ -->
<div class="modal fade modal-add-bx" id="AddProduct" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Add a product</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Select a category</label>
                            <select class="form-control" id="ddlCategoryData">
                                <option value="0">Select Category</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Product name</label>
                            <input type="text" id="txtProductname" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="Description" class="form-control bg-gray border-0"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Product ID</label>
                            <input type="text" id="txtProductID" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Add a product image</label>
                            <div class=" add-icon-bx">
                                <input type="text" id="txtProductImage" readonly="readonly" class="form-control">
                                <div class="add-icon">
                                    <input type="file" name="myfile" id="ProductImage" accept="image/*" onchange="ProductreadURL(this);" class="form-control">
                                    <img src="~/images/add-image-icon.png">
                                </div>
                            </div>


                             <div class="addimg-area mt-3" id="Storedeleteimageidoffund">
                            <div class="cross-icon image-icon pl-1 pt-0">
                               <ul id="MultipleimageidStore"></ul>
						    </div>
                                  <p id="txtmulimagesStrore"></p>
                         </div>


                        </div>
                        <div class="form-group">
                            <label>Selling price</label>
                            <div class="input-group doller-sign">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">@Model.currencyModel.CurrencyCode</span>
                                </div>
                                <input type="number" id="txtsellingPrice" class="form-control">
                            </div>

                        </div>
                        <div class="form-group">
                            <label>Product quantity</label> @*data-toggle="modal" data-target="#SecurityCheckpoint" data-dismiss="modal"*@
                            <input type="number" class="form-control" id="txtProductquantity">
                        </div>
                        <div class="form-group">
                            <label>Stock threshold</label>
                            <input type="text" class="form-control" id="txtStockthreshold">
                        </div>

                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green" id="BtnAddProduct">Add a new product</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->

<!-- @*=======Cash Sale=====*@ -->

<div class="modal fade modal-small-bx" id="bestWash" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Best you wash your hands :)</h5>
                    <p>Your cash sale has been completed</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btnCheckout" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>

<div class="modal fade modal-small-bx" id="bestfail" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    
                    <p>Your transaction has been failed.</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btnCheckout" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@-->

<!-- @*======Edit Product====*@ -->
<div class="modal fade modal-add-bx" id="EditProduct" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Edit a product</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Select a category</label>
                            <select class="form-control" id="ddlEditCategory">
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Product name</label>
                            <input type="text" class="form-control" id="txteditProductName" value="Product name">
                        </div>

                        <div class="form-group">
                            <label>Product ID</label>
                            <input type="text" class="form-control" id="txteditProductID" value="Product ID">
                        </div>
                        <div class="form-group">
                            <label>Product image</label>
                            <div class=" add-icon-bx">
                                <input class="form-control  pt-3" id="editProductimg" disabled />
                                <div class="add-icon">
                                    <input type="file" name="myfile" id="editProductImage" class="form-control" accept="image/*" onchange="ImageProduct(this);" />
                                    <img src="~/images/add-image-icon.png">
                                </div>
                            </div>
                            <div class="addimg-area mt-3">
                                <div class="cross-icon image-icon pl-1 pt-0">
                                    <ul id="listofimages059">
                                    </ul>
                                </div>
                                <p id="txtstoreimagenameid"></p>
                            </div>
                        </div>
                        
                       


                        <div class="form-group">
                            <label>Selling price</label>
                            <div class="position-relative">
                                <input type="text" class="form-control" id="txteditSellingPrice">
                                <span class="doller-sign">@Model.currencyModel.CurrencyCode</span>
                            </div>
                        </div>
                       
                        <div class="form-group">
                            <label>Stock threshold</label>
                            <input type="text" class="form-control" id="txtthreshold">
                        </div>

                    </div>
                    <div class="col-md-12 text-right">
                        <button type="button" class="btn btn-lumo-green" id="btnUpdateProduct">Update product</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>



<div class="modal fade modal-add-bx" id="EditProducts" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="titleheader">Edit Product Quantity</h5>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">

                        <div class="form-group">
                            <label>Product Quantity</label>
                            <input type="text" class="form-control" id="txteditProductQty" value="">
                        </div>
                        <div class="form-group">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="inlineRadio1">
                                <label class="form-check-label" for="inlineRadio1">Add</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="inlineRadio2">
                                <label class="form-check-label" for="inlineRadio2">Deduct</label>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green" id="btneditProduct">Update product</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*======Password for product update====*@ -->
<div class="modal fade modal-add-bx" id="ProductUpdatepass" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Security checkpoint</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message">


                    <div class="col-md-12">
                        <div class="row ">
                            <div class="col-md-6 text-center">
                                <label>Current product quantity</label>
                                <div class="form-group  add-icon-bx">
                                    <input type="text" class="form-control ">
                                </div>

                            </div>
                            <div class="col-md-6 text-center">
                                <label>NEW product quantity</label>
                                <div class="form-group  add-icon-bx">
                                    <input type="text" class="form-control ">
                                </div>

                            </div>

                        </div>

                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" class="form-control">
                        </div>





                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green">Update</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*======Checkout====*@ -->
<div class="modal fade modal-add-bx" id="Checkout" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content ">
            <div class="modal-header">
                <h5 class="modal-title ">Checkout</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body px-0 py-0">
                <div class="storefont-bx unread-message-box  mr-0">
                    <div class=" px-3">

                        <div class="username-bx mb-2">
                            Order details
                        </div>

                        <p class="mb-1" id="lblCustomerDetail"></p>


                    </div>
                    <div class="border-bottom"></div>
                    <div id="dvCheckout">
                        <ul class="h-220px overflow-auto storefront-left">

                            <li>
                                <div class="d-flex justify-content-between align-content-center">

                                    <div class="username-bx">
                                    </div>

                                    <div class="d-flex align-items-center">
                                        <div class="counter">
                                            <input class="counter__input" type="text" value="1" name="counter" size="5" readonly="readonly" />
                                            <a class="counter__increment" href="#">+</a>
                                            <a class="counter__decrement" href="#">&ndash;</a>
                                        </div>
                                        <div class="username-bx">
                                        </div>

                                    </div>
                                </div>

                            </li>

                        </ul>
                    </div>
                    <div class="text-right px-4">
                        <a href="" class="text-blue">


                        </a>
                    </div>
                    <div class="d-flex justify-content-between align-content-center bg-lumo p-3 font-weight-bold">

                        <div class="username-bx" id="dvCheckoutCount">
                        </div>
                        @*<div>
                        <span></span>
                        <span class="username-bx font-weight-bold pl-1" id="dvCheckoutPrice">
                        </span>
                        </div>*@

                        <div class="price" id="dvCheckoutPrice">
                        </div>
                    </div>
                    <div class="bg-gray border-radius-bottom ">
                        <div class="checkout-bottom">
                            <ul>
                                <li>
                                    <a href="">
                                        <div class="img-icon" onclick="ClearCart()"> <img src="~/images/cross-big.png"></div>
                                        <span>
                                            Cancel and clear cart
                                        </span>

                                    </a>

                                </li>
                                <li>
                                    <a data-dismiss="modal" data-toggle="modal" data-target="#CashSale">
                                        <div class="img-icon"> <img src="~/images/Dollar-Circle.png"></div>
                                        <span>Cash sale</span>

                                    </a>

                                </li>
                                <!--  <li>
                                     <a href="">
                                         <div class="img-icon"> <img src="~/images/Wifi.png"></div>
                                         <span>
                                             Request
                                             payment
                                         </span>

                                     </a>

                                 </li> -->
                                <li>
                                    <a data-toggle="modal" data-dismiss="modal" id="txtMobileVerify" @*data-target="#ScanPay"*@>
                                        <div class="img-icon"> <img src="~/images/cil_qr-code1.png"></div>
                                        <span>
                                            Scan to
                                            Pay
                                        </span>

                                    </a>

                                </li>
                                @*<li>
                                <a href="" data-toggle="modal" data-target="#ScanToPay" data-dismiss="modal">
                                <div class="img-icon"> <img src="~/images/Voice Shape 2.png"></div>
                                <span>
                                Scan to
                                Pay
                                </span>
                                </a>

                                </li>*@



                            </ul>
                        </div>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*=======QR CODE=======*@ -->
<div class="modal fade modal-sm-bx" id="ScanPay" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Scan to pay</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>
            </div>
            <div class="modal-body text-center">
                <div class="qr-code" id="paymentQR" onclick="GenerateAttendanceQRbtn()">
                    <img id="paymentQR11" class="img-fluid" />
                </div>


                @*<img src="~/images/QR_code.png" class="img-fluid">*@
                @*<div class="qr-code">
                <img src="~/images/CleanShot.png" class="img-fluid">
                </div>*@



            </div>

        </div>
    </div>
</div>
<!-- @*=======QR CODE=======*@ -->
<!-- @*====END=====*@ -->
<!-- @*======Cash Sale====*@ -->
<div class="modal fade modal-add-bx" id="CashSale" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Cash sale</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <div class="new-message">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Checkout amount</label>
                            <div class="input-group doller-sign">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">@Model.currencyModel.CurrencyCode</span>
                                </div>
                                <input type="text" class="form-control" id="txtCheckoutamount">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Cash received</label>
                            <div class="input-group doller-sign">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">@Model.currencyModel.CurrencyCode</span>
                                </div>
                                <input type="text" class="form-control" id="txtCash" value="" onchange="percentage_2()">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Change</label>
                            <div class="input-group doller-sign">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">@Model.currencyModel.CurrencyCode</span>
                                </div>
                                <input type="text" class="form-control" id="txtChange">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 text-right">
                        <button type="button" class="btn btn-lumo-green bg-pink" data-dismiss="modal">Cancel payment</button>
                        <button type="button" class="btn btn-lumo-green" id="btnprocessPayment" data-dismiss="modal"@* data-toggle="modal" data-target="#bestWash"*@>Process payment</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- @*===end====*@ -->
<!-- @*=======SecurityCheckpointPass=======*@ -->
<div class="modal fade modal-sm-bx" id="SecurityCheckpointPass" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Security checkpoint</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>
            </div>
            <div class="modal-body  text-center p-3">
                <div class="past-leave-box">
                    <p>Please insert the Buyer’s four digit passcode</p>
                </div>

                <form class="digit-group">
                    <input type="password" class="digit" name="digit-1">
                    <input type="password" id="digit-2" class="digit" name="digit-2">
                    <input type="password" id="digit-3" class="digit" name="digit-3">
                    <input type="password" id="digit-4" class="digit" name="digit-4">
                </form>



            </div>

        </div>
    </div>
</div>
<!-- @*====END=====*@ -->
<!-- @*=======SecurityIncorrectPass=======*@ -->
<div class="modal fade modal-sm-bx" id="SecurityIncorrectPass" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Incorrect passcode</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>
            </div>
            <div class="modal-body  text-center p-3">
                <div class="past-leave-box">
                    <p>Please re-insert the Buyer’s four digit passcode</p>
                </div>

                <form class="digit-group">
                    <input type="password" class="digit" name="digit-1" placeholder="*">
                    <input type="password" id="digit-2" class="digit" name="digit-2" placeholder="*">
                    <input type="password" id="digit-3" class="digit" name="digit-3" placeholder="*">
                    <input type="password" id="digit-4" class="digit" name="digit-4" placeholder="*">
                </form>



            </div>

        </div>
    </div>
</div>
<!-- @*====END=====*@ -->
<!-- @*======Pre-order collection====*@ -->
<div class="modal fade modal-add-bx" id="Pre-orderCollection" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content ">
            <div class="modal-header">
                <h5 class="modal-title ">Pre-order collection</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body px-0 py-0">
                <div class="storefont-bx unread-message-box mr-0">
                    <div class=" py-2 px-3">

                        <div class="username-bx mb-2">
                            Order details
                        </div>

                        <p> <span id="lblname"></span>  <span id="lblmobileno"></span>  <span id="lblorderno"></span></p>


                    </div>

                    <div class="table-responsive h-48vh overflow-auto border-top">
                        <table class="table active-items-bx">
                            <thead>
                                <tr>
                                    <th>Product name</th>
                                    <th>Quantity</th>
                                    <th>Amount</th>
                                    @* <th>Delete</th>*@
                                </tr>
                            </thead>
                            <tbody id="customerdata">
                                @* <tr>
                                <td>Product name #1</td>
                                <td>(1)</td>
                                <td>R10.00</td>

                                <td><button type="button" class="btn-link btn" data-dismiss="modal" data-toggle="modal" data-target="#delete-confimation"><img src="~/images/Delete2.png"></button></td>

                                </tr>
                                <tr>
                                <td>Product name #1</td>
                                <td>(1)</td>
                                <td>R10.00</td>

                                <td><button type="button" class="btn-link btn" data-dismiss="modal" data-toggle="modal" data-target="#delete-confimation"><img src="~/images/Delete2.png"></button></td>
                                </tr>*@

                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-content-center bg-lumo p-3 font-weight-bold">

                        <div class="username-bx">
                            Total (<span id="lbltotalitem"></span> items)
                        </div>

                        <div class="price">
                            @*<div class="input-group doller-sign">
                            <div class="input-group-prepend">
                            <span class="input-group-text"></span>
                            </div>

                            </div>*@
                            @*R4010.00*@
                            <span>@Model.currencyModel.CurrencyCode</span>
                            <span id="lbltotalamount"></span>
                        </div>
                    </div>
                    <div class="bg-gray border-radius-bottom ">
                        <div class="checkout-bottom">
                            <ul>
                                <li>
                                    @* <a href="">*@
                                    <div class="img-icon"> <img src="~/images/Tick-Circle.png" data-target="#markAsCollected" data-toggle="modal"></div>
                                    <span>
                                        Mark as
                                        collected
                                    </span>

                                    @*  </a>*@

                                </li>
                                @* <li>
                                <a href="" data-toggle="modal" data-target="#CashSale">
                                <div class="img-icon"> <img src="~/images/Voice Shape 2.png"></div>
                                <span>
                                Scan a
                                QR code
                                </span>

                                </a>

                                </li>*@


                            </ul>
                        </div>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*=======Super Job=====*@ -->

<div class="modal fade modal-small-bx" id="Superjob" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Super job!</h5>
                    <p>This order has been collected</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btncloseSuperJob" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*======Request Payment====*@ -->
<div class="modal fade modal-add-bx" id="RequestPayment" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-500">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Request a payment</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message ">


                    <div class="col-md-12">



                        <div class=" form-group search-bar-list">
                            <div class=" input-group diff2">
                                <input class="form-control search text-center" type="text" placeholder="Search name or mobile number">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <img src="~/images/Search-2.png" class="img-fluid">
                                    </span>
                                </div>
                            </div>

                        </div>


                        <div class="form-group  text-center">
                            <label>Amount due</label>

                            <input type="text" class="form-control ">


                        </div>






                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green">Request payment</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*=======Good Job=====*@ -->

<div class="modal fade modal-small-bx" id="Goodjob" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Good things are coming!</h5>
                    <p>Pending recipient payment approval</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*======Mailbot====*@ -->
<div class="modal fade modal-add-bx" id="Mailbot" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-500">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Mailbot</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message " id="Emailrecon">


                    <div class="col-md-12">


                        <div class="form-group  text-center">
                            <label>Who would you like to receive this email?</label>

                            <input type="text" class="form-control " placeholder="Insert email address" id="EmailInput">


                        </div>

                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" id="btnEmailSend" class="btn btn-lumo-green">Send mail</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*=======Straight Through=====*@ -->

<div class="modal fade modal-small-bx" id="StraightThrough" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Straight through the inter webs!</h5>
                    <p>Your mail has been sent successfully</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*=======Scan QR Code=======*@ -->
<div class="modal fade modal-sm-bx" id="ScanQRCode" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class=" mt-3 cross-icon text-right  pb-0 cross-relative ">

                <button type="button" class="cross" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body p-0 text-center">
                <div class="past-leave-box">
                    <h5 class="font-weight-bold">Scan a QR code</h5>

                </div>
                <div class="qr-code-box ">
                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*====END=====*@ -->
<!-- @*======Order Review====*@ -->
<div class="modal fade modal-add-bx" id="OrderReview" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable w-500 modal-dialog-centered">
        <div class="modal-content ">
            <div class="modal-header">

                <h5 class="modal-title" id="lblOrderID"></h5>
                @* <label class="modal-title" id="OrderID">tttdd</label>*@


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body px-0 py-0">
                <div class="storefont-bx unread-message-box mr-0">
                    <div class=" py-2 px-3" id="dvUserDetail">

                        <div class="username-bx mb-2">
                            Order details
                        </div>
                        <p id="lblUserDetail"></p>
                        @* <label id="UserDetail">gyugfyfy</label> {User name} | {Mobile number} | {Order number}*@


                    </div>

                    <div class="table-responsive h-48vh overflow-auto border-top">
                        <table class="table active-items-bx" id="tblBuyerProduct">

                            <tbody id="ItemProduct">
                                @* <tr>
                                <td></td>
                                <td></td>
                                <td></td>

                                <td></td>

                                </tr>*@


                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-content-center bg-lumo px-3 py-4 font-weight-bold border-radius-bottom">

                        <div class="username-bx" id="dvTotalItems">

                            @*Total (5 items)*@
                        </div>

                        <div class="price" id="dvPrice">

                            @* R4010.00*@
                        </div>
                    </div>




                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*======Process Refund====*@ -->
<div class="modal fade modal-add-bx" id="ProcessRefund" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-500">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Process a refund</h5>



                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message ">


                    <div class="col-md-12">



                        <div class=" form-group search-bar-list">
                            <div class=" input-group diff2">
                                <input class="form-control search text-center" id="txtSearchUser" type="text" placeholder="Search name or mobile number">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <img src="~/images/Search-2.png" class="img-fluid">
                                    </span>
                                </div>
                            </div>
                            <div>
                                <ul id="ContactList">
                                </ul>
                            </div>

                        </div>


                        <div class="form-group  ">
                            <label>Refund amount</label>
                            <div class="input-group doller-sign">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">@Model.currencyModel.CurrencyCode</span>
                                </div>
                                <input type="text" class="form-control" id="txtrefundamount">
                            </div>



                        </div>
                        <div class="form-group  ">
                            <label>Credit note</label>

                            <textarea class="form-control height-auto bg-gray border-gray" rows="6" id="txtCreditnotes" placeholder=""></textarea>


                        </div>






                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green" id="btnSaveRefund">Process the refund</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*======Security checkpoint Proceed====*@ -->
<div class="modal fade modal-add-bx" id="SecurityProceed" tabindex="-1" aria-labelledby="SecurityProceedLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-500 modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Security Checkpoint</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message ">


                    <div class="col-md-12">



                        @*<div class=" form-group search-bar-list">
                        <div class=" input-group diff2">
                        <input class="form-control search text-center" type="text" placeholder="Search name or mobile number">
                        <div class="input-group-prepend">
                        <span class="input-group-text">
                        <img src="~/images/Search-2.png" class="img-fluid">
                        </span>
                        </div>
                        </div>

                        </div>*@


                        <div class="form-group  text-center">
                            <label>Please insert your otp to proceed</label>

                            <input type="text" class="form-control " id="txtwithdrawalpassword">


                        </div>
                        <div class="text-center">

                            <button type="button" class="btn btn-lumo-green " id="btnWithdrawalverify">Proceed</button>

                        </div>

                    </div>


                </div>




            </div>

        </div>

    </div>

</div>
</div>
<!-- @*===end====*@ -->

<!-- @*=======CreditNote=====*@ -->

<div class="modal fade modal-small-bx" id="CreditNote" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Bye bye earnings!</h5>
                    <p>You’ve successfully posted a refund</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btncreditClose" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*=======EditSchedule=======*@ -->
<div class="modal fade modal-add-bx" id="EditSchedule" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit a schedule</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>
            </div>
            <div class="modal-body   p-3">
                <div class="col-lg-12 p-6">
                    <div class="form-group ">
                        <label>Schedule title</label>
                        <input type="text" class="form-control" id="txttitle" value="First break schedule">
                    </div>
                    <div class="">

                        <div class=" row">

                            <div class="form-group col-md-6">
                                <label>OPEN for pre-ordering</label>
                                <input type="time" class="form-control" id="txtopentime" value="05:00am">
                            </div>
                            <div class="form-group col-md-6">
                                <label>CLOSED for pre-ordering</label>
                                <input type="time" class="form-control" id="txtclosetime" value="09:00am">
                            </div>
                        </div>
                    </div>
                    <div class="form-group mt-2">
                        <label>Which days would you like to control the ordering time slots?</label>
                        <div id="dvWeek" class="slot-area week">
                            <div class="form-group">
                                <input type="checkbox" id="monday" class="ChkDays Editchk" value="1" />
                                <label for="monday" class="week-bx Days">Mon</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="tuesday" class="ChkDays Editchk" value="2" />
                                <label for="tuesday" class="week-bx Days">Tue</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="wednesday" class="ChkDays Editchk" value="3" />
                                <label for="wednesday" class="week-bx Days">Wed</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="thusday" class="ChkDays Editchk" value="4" />
                                <label for="thusday" class="week-bx Days">Thu</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="friday" class="ChkDays Editchk" value="5" />
                                <label for="friday" class="week-bx Days">Fri</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="saturday" class="ChkDays Editchk" value="6" />
                                <label for="saturday" class="week-bx Days">Sat</label>
                            </div>
                            <div class="form-group">
                                <input type="checkbox" id="sunday" class="ChkDays Editchk" value="7" />
                                <label for="sunday" class="week-bx Days">Sun</label>
                            </div>



                        </div>
                    </div>


                    <div class="text-right">

                        <button type="button" id="btnUpdateTimeSlot" class="btn btn-lumo-green">Update schedule</button>
                    </div>

                </div>



            </div>

        </div>
    </div>
</div>
<!-- @*====END=====*@ -->
<!-- @*=======Locked Down=====*@ -->

<div class="modal fade modal-small-bx" id="LockedDown" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Locked down!</h5>
                    <p>Your store has been scheduled for selling</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btncreditCllose" class="btn btn-default btn-block">Close</button>

                </div>


            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*======Credit Not Review====*@ -->
<div class="modal fade modal-add-bx" id="CreditReview" tabindex="-1" aria-labelledby="AddProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-500">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title ">Credit note</h5>


                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </button>

            </div>
            <div class="modal-body">
                <div class="new-message ">


                    <div class="col-md-12">

                        <div class="form-group  ">
                            <label>Mobile number</label>

                            <input type="text" class="form-control " value="0836465336">


                        </div>
                        <div class="form-group  ">
                            <label>Date of refund</label>

                            <input type="text" class="form-control " value="Thursday 23 March 2023 07:02 am">


                        </div>
                        <div class="form-group  ">
                            <label>Refund amount</label>

                            <input type="text" class="form-control " value="R230.00">


                        </div>





                        <div class="form-group  ">
                            <label>Credit note</label>

                            <textarea class="form-control height-auto bg-gray border-gray" rows="6" placeholder="Incorrect items added to the cart for payment."></textarea>


                        </div>






                    </div>
                    <div class="col-md-12 text-right">

                        <button type="button" class="btn btn-lumo-green">Process the refund</button>
                    </div>



                </div>

            </div>

        </div>

    </div>
</div>
<!-- @*===end====*@ -->
<!-- @*=======item deletion confirmation=====*@ -->

<div class="modal fade modal-small-bx" id="deleteconfimation" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Are you sure?</h5>
                    <p>You are about to delete this item forever :(</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn bg-lumo" id="deleteClose">No</button>
                    <button type="button" class="btn bg-lumo" id="btndeleteProduct">Yes</button>

                </div>

            </div>

        </div>
    </div>
</div>
<div class="modal fade modal-small-bx" id="deletepreconfimation" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Are you sure?</h5>
                    <p>You are about to delete this timeslot forever:(</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn bg-lumo" id="deletepreClose">No</button>
                    <button type="button" class="btn bg-lumo" id="btndeletepre">Yes</button>

                </div>

            </div>

        </div>
    </div>
</div>



<div class="modal fade modal-small-bx" id="markAsCollected" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Are you sure?</h5>
                    <p>Do you want to mark as collected.</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn bg-lumo" id="" data-dismiss="modal">No</button>
                    <button type="button" class="btn bg-lumo" id="btnmarkasCollected">Yes</button>

                </div>

            </div>

        </div>
    </div>
</div>
<div class="modal fade modal-small-bx" id="deleteSalesconfimation" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Are you sure?</h5>
                    <p>You are about to delete this item forever :(</p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn bg-lumo" id="deleteSalesClose">No</button>
                    <button type="button" class="btn bg-lumo" id="btndeleteSalesProduct">Yes</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*========END======*@ -->
<!-- @*=====modal popup Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="AddSuccessfull" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Yippee!</h5>
                    <p>Store added successfully</p>
                </div>
                <div class="text-center">

                    <button type="button" id="AddSuccessfullClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade modal-small-bx" id="AddSuccessfullcat" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Yippee!</h5>
                    <p>Category added successfully</p>
                </div>
                <div class="text-center">

                    <button type="button" id="AddSuccessfullcatClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====end======*@ -->
<!-- @*=====modal popup Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="ProductSuccessfull" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    @* <h5>Yippee!</h5>
                    <p>Product added successfully</p>*@
                    <p id="message"></p>
                </div>
                <div class="text-center">

                    <button type="button" id="ProductSuccessfullClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====end======*@ -->
<!-- @*=====modal Locked down! Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="LockedDown" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Locked down!</h5>
                    <p>Your store has been scheduled for selling</p>
                </div>
                <div class="text-center">

                    <button type="button" id="LockedClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====end======*@ -->
<!-- @*=====modal popup Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="deletemessage" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Yippee!</h5>
                    <p>Record has been deleted successfully.</p>
                </div>
                <div class="text-center">

                    <button type="button" id="DeletemsgClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====modal popup Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="UpdatedMsg" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Yippee</h5>
                    <p>Record Updated successfully</p>
                </div>
                <div class="text-center">
                    <input type="hidden" id="hdnproductID" />
                    <button type="button" id="UpdatedMsgClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>

@*<div class="modal fade modal-small-bx" id="Items-Added" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5 id="itemaddheader"></h5>
                    @*  <p>Your item is now LIVE in your community</p>*@
@*   <p id="message"></p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn btn-default btn-block" id="btnsalesclose">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>*@
<!-- @*=====end======*@ -->
<!-- @*=====modal popup Yipee ==*@ -->
<div class="modal fade modal-small-bx" id="CartMsg" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Yippee</h5>
                    <p>Item Added in cart Successfully</p>
                </div>
                <div class="text-center">
                    <input type="hidden" id="hdnproductID" />
                    <button type="button" id="CartClose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====end======*@ -->
<!-- @*=====modal popup !oops ==*@ -->
<div class="modal fade modal-small-bx" id="ExistRecord" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Oops!</h5>
                    <p>Record Already Exist.</p>
                </div>
                <div class="text-center">
                    <input type="hidden" id="hdnproductID" />
                    <button type="button" id="btnExistRecordClose" class="btn btn-default btn-block">Close</button>
                    <input type="hidden" id="Searchcustomerid" />
                    <input type="hidden" id="hdnTimeSlotID" />
                    <input type="hidden" id="hdnMobileNo" />

                </div>

            </div>

        </div>
    </div>
</div>
<!-- @*=====modal popup !oops ==*@ -->
<div class="modal fade modal-small-bx" id="ExistProduct" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>oops!</h5>
                    <p>ProductID already craeted with this product</p>
                </div>
                <div class="text-center">

                    <button type="button" id="btnExistProductClose" class="btn btn-default btn-block">Close</button>


                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade modal-small-bx" id="delete-storeconfimation" tabindex="-1" aria-labelledby="UnarchiveLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5>Active Stores!</h5>
                    <p>You are about to delete this store forever :(</p>
                </div>
                <div class="text-center">
                    <button type="button" id="btnstoreno" class="btn bg-pink" data-dismiss="modal">No</button>
                    <button type="button" id="btnstoreyes" class="btn bg-lumo">Yes</button>


                </div>

            </div>

        </div>
    </div>
</div>

<!-- @*======Item Added====*@ -->
<div class="modal fade modal-small-bx" id="Items-Added" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    <h5 id="itemaddheader"></h5>
                    @*  <p>Your item is now LIVE in your community</p>*@
                    <p id="message"></p>
                </div>
                <div class="text-center">

                    <button type="button" id="btndeleteclose" class="btn btn-default btn-block">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<div class="modal fade modal-small-bx" id="Topjop-Update" tabindex="-1" aria-labelledby="LeavePastLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body text-center">
                <div class="past-leave-box">
                    @*<h5>Top job!</h5>*@
                    <h5 id="EventUpdateHeading"></h5>
                    @*<p>You’ve successfully updated this event</p>*@
                    <p id="eventUpdatemessage"></p>
                </div>
                <div class="text-center">

                    <button type="button" class="btn btn-pink " data-dismiss="modal">Close</button>

                </div>

            </div>

        </div>
    </div>
</div>
<input type="hidden" id="StoreId" />
<input type="hidden" id="salesId" />
<input type="hidden" id="HiddTotalSales" />
<input type="hidden" id="HidCircularPayment" />
<input type="hidden" id="HidCashSales" />
<input type="hidden" id="HidTotalRecipts" />
@*<input type="hidden" id="hdnorderid" />*@
<input type="hidden" id="hdnproductcost" />
<input type="hidden" id="hdnOrderId" />
<input type="hidden" id="preId" />

<input type="hidden" id="hdncategoryId" />
<input type="hidden" id="QuantityProductId" />
<input type="hidden" id="QuantityCategoryId" />
<input type="hidden" id="HiddenId" />
<input type="hidden" id="hiddenlblStoreName" />
<input type="hidden" id="StoreFileNameImageComm" />

<script src="https://cdn.jsdelivr.net/npm/jquery-table2excel@1.1.1/dist/jquery.table2excel.min.js"></script>
<style>
    .input-error {
    border: 2px solid red; /* Red border outline for error */
}

</style>
<!-- @*========END======*@ -->
<script>
    $(document).ready(function () {
        $('.addimg-area').hide();
        $("#txtSroreName").keyup(function () {
            $('#txtSroreName').css('textTransform', 'capitalize');
        });
    });

    $('#precrossbtn').click(function (e) {
        $('.message-tab a[href="#POSsystem"]').tab("show");

    })
    $('#Stockcrossbtn').click(function (e) {
        $('.message-tab a[href="#POSsystem"]').tab("show");

    })
    $('#Upcomingcross').click(function (e) {
        $('.message-tab a[href="#POSsystem"]').tab("show");

    })
    $('#poscrossbtn').click(function (e) {
        window.location.href = "/Dashboard/Dashboard";
    })
    const urlParamsyy = new URLSearchParams(window.location.search);
    const param_aa = urlParamsyy.get('id');
    if (param_aa == 'item') {
        $('[href="#TimeSlots"]').click();
    }
    const urlParamsyyy = new URLSearchParams(window.location.search);
    const param_aaa = urlParamsyyy.get('id');
    if (param_aaa == 'items') {
        $('[href="#StockInventory"]').click();
    }

    //Refresh
    $(document).ready(function () {

        const urlParams = new URLSearchParams(window.location.search);
        const param_x = urlParams.get('id');
        if (param_x == 'Cart') {
            $('[href="#POSsystem"]').click();
        }
    });

</script>
<script>
    $(function () {
        $('#inlineRadio1').change(function () {
            $(this).is(':checked')
        });
    });

    $(function () {
        $('#inlineRadio2').change(function () {
            $(this).is(':checked')
        });
    });

    $(document).on("click", "#btneditProduct", function () {
        var CR = "CR"
        var DR = "DR"
        var ProductId = $("#QuantityProductId").val();
        var CategoryId = $("#QuantityCategoryId").val();
        var StoreId = $('#ddlStoreDropdown').val();
        var Quantity = $("#txteditProductQty").val();
        var ProductCost = $("#hdnprodcst").val();

        var checkbox = $('#inlineRadio1').is(':checked');
        var checkbox2 = $('#inlineRadio2').is(':checked');


        var formData = new FormData();
        formData.append("ProductId", ProductId);
        formData.append("CategoryId", CategoryId);
        formData.append("StoreId", StoreId);
        formData.append("Quantity", Quantity);
        formData.append("ProductCost", ProductCost);
        if (checkbox == true) {
            formData.append("EntryStatus", CR);
        }
        else {
            formData.append("EntryStatus", DR);
        }



        var Aurl = "/Storefront/StockEdit";

        $.ajax({
            type: "Post",
            url: Aurl,
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: "json",
            success: function (Result) {
                var status = Result.success;
                if (status == true) {
                    $("#Topjop-Update").modal("show");
                    $("#EventUpdateHeading").text("Top job!");
                    $("#eventUpdatemessage").text("You’ve successfully updated this event");
                    $("#EditProducts").modal('hide');
                    window.location.href = "/Storefront/Storefront?id=items";
                }
                else {
                    $("#Topjop-Update").modal("show");
                    $("#EventUpdateHeading").text("Oops!");
                    $("#eventUpdatemessage").text(Result.message);
                    //  $("#message").text(Result.message);
                }
            },
            error: function (request, error) {
                $("#Topjop-Update").modal("show");
                $("#EventUpdateHeading").text("Oops!");
                $("#eventUpdatemessage").text("Something went wrong");
            }
        });

    });

    $(function () {

        $("#datefrom").datepicker();
        $("#dateTo").datepicker();
        $("#datetime").datepicker();
        $("#datetime1").datepicker();


    });
    //$(document).ready(function () {

    //    var isPostBack = '<%=IsPostBack%>';
    //    if (isPostBack == 'False' || $('#' + '<%=DropDownList1.ClientID%>').val() == '1') {
    //        //This statement allow you to set the dropdown2 to disable
    //        $('#' + '<%=ddlStoreDropdown.ClientID%>').attr('disabled', true);
    //    }
    //    else {
    //        $('#' + '<%=ddlStoreDropdown.ClientID%>').attr('disabled', false);
    //    }
    //$('#' + '<%=DropDownList1.ClientID%>').on("change", function () {
    //    //Your code here
    //    if ($('#' + '<%=DropDownList1.ClientID%>').val() == '1') {
    //        $('#' + '<%=DropDownList2.ClientID%>').attr('disabled', true);
    //    }
    //    else {
    //        $('#' + '<%=DropDownList2.ClientID%>').attr('disabled', false);
    //    }
    //});
    // });



    $(document).on("click", ".valueCount", function () {

        var $el = $(this);
        let cnt = 0;

        $el.closest('.counter').find('.count').val(function (i, t) {

            cnt = parseInt(t, 10) + (1 * $el.data('factor'));

            return cnt;
        });
        //CountwiseAmount(cnt);
        var amount = $el.closest('.countcontainer').find('.amount').val();
        var cntamount = parseInt(amount * cnt);
        $el.closest('.countcontainer').find('.amount').val(cntamount);
        var productID = $el.closest('.countcontainer').find('.hdncartProductID').val();
        fninsertItem(productID, "", cntamount, cnt);
        ItemCart();
    });

    $(document).ready(function () {

        $(document).on("click", ".CheckoutCount", function () {

            var $el = $(this);
            $el.closest('.checkout').find('.CheckoutValue').val(function (i, t) {
                return parseInt(t, 10) + (1 * $el.data('factor'));

            });
        });

        $(document).on("change", "#dateTo", function (e) {
            // do stuff!

            var Date = $('#datefrom').val();
            var Enddate =$('#dateTo').val();
            if (Date != ''&& Enddate !='') {
                BuyerDetails();
            }
        });

        DDlCategoryData();
        ItemCart();


        // CashRagister();
        $('#txtCheckoutamount').val($("#checkoutPrice").text());
        //CustomerAmount();

        $("#SearchProduct").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#InventoryTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        $("#SearchbuyerList").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#BuyerData tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });


    });
    function CashRagister() {

        var StartDate = $('#datefrom').val();
        var EndDate = $('#dateTo').val();
        var StoreID = $('#ddlStoreDropdown').val();


        $.ajax({
            type: "GET",
            url: "/Storefront/StoreCashRagister?StoreId=" + StoreID + " &Startdate=" + StartDate + "&EndDate=" + EndDate,
            success: function (response) {
                $('#dvTotalPrice').text('@Model.currencyModel.CurrencyCode' + response.data[0].totalSales.toFixed(2));
                $('#dvCircularPayment').text('@Model.currencyModel.CurrencyCode' + response.data[0].circularPayment.toFixed(2));
                $('#dvCashSales').text('@Model.currencyModel.CurrencyCode' + response.data[0].cashsales.toFixed(2));
                $('#dvTotalRecipts').text('@Model.currencyModel.CurrencyCode' + response.data[0].totalReceipent.toFixed(2));

                $('#dvdiffrence').text('0.00');

                $('#HiddTotalSales').val('@Model.currencyModel.CurrencyCode' + response.data[0].totalSales.toFixed(2));
                $('#HidCircularPayment').val('@Model.currencyModel.CurrencyCode' + response.data[0].circularPayment.toFixed(2));
                $('#HidCashSales').val('@Model.currencyModel.CurrencyCode' + response.data[0].cashsales.toFixed(2));
                $('#HidTotalRecipts').val('@Model.currencyModel.CurrencyCode' + response.data[0].totalReceipent.toFixed(2));

            }
        });

    }

    function Walletballace() {
        var StoreID = $('#ddlStoreDropdown').val();
        $.ajax({
            type: "GET",
            url: "/Storefront/Storewallet?StoreID=" + StoreID,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.success == true) {
                    var Ewallet = response.data[0].walletAmount
                   // alert(response.data[0].walletAmount);
                    if (Ewallet == null) {

                        $('#lblStoreName').text(response.data[0]?.storeName);
                        $('#txtWalletballance').val('@Model.currencyModel.CurrencyCode' + '00.00');
                    }
                    else {

                        $('#lblStoreName').text(response.data[0]?.storeName);
                        $('#txtWalletballance').val('@Model.currencyModel.CurrencyCode' + response.data[0]?.walletAmount.toFixed(2));
                    }
                }
                else {

                    $('#lblStoreName').text($("#ddlStoreDropdown option:selected").text());
                    $('#txtWalletballance').val('@Model.currencyModel.CurrencyCode' + response.data[0]?.walletAmount.toFixed(2));
                }

            }

        });

    }
    $("#txtSearchPreorder").on("keyup", function () {
        var MobileNo = $('#txtSearchPreorder').val();
        var formData = {
            Mobile: MobileNo,
            StoreId: $('#ddlStoreDropdown').val()
        }
        $.ajax({
            type: "GET",
            url: "/Storefront/StorePreorderCustomer",
            data: formData,
            success: function (response) {
                if (response.success == true) {
                    var data = response.data.length;
                    $("#dvCustomeramount").empty();
                    var listAmount = $("#dvCustomeramount").append('<ul></ul>').find('ul');
                    if (data != 0) {

                        for (var i = 0; i < data; i++) {
                            $('#hdnOrderId').val(response.data[i].id)
                            listAmount.append('<li><a class="d-flex justify-content-between align-content-center" href="#" onclick="showCustomerproductDetails(' + MobileNo + ')"><div class="username-bx" id="orderId">' + response.data[i].buyerName + '</div><div class="price"> @Model.currencyModel.CurrencyCode ' + response.data[i].amount + '</div></a></li>');


                        }
                    }
                }
            }


        });

    });


    function showCustomerproductDetails(mobileno) {
        var formData = {
            StoreId: $("#ddlStoreDropdown").val(),
            MobileNo: mobileno
        };
        $.ajax({
            url: '/Storefront/GetCustomerProductDetails',
            type: 'POST',
            data: formData,
            success: function (response) {
                if (response.success == true) {
                  //  $("#lblname").text(response.data.name);
                  //  $("#lblmobileno").text(response.data.mobileNo);
                  //  $("#lblorderno").text(response.data.orderNo);
                    $("#lbltotalitem").text(response.data.totalItem);
                    $("#lbltotalamount").text(response.data.totalPrice);
                    var _html = '';
                    for (var i = 0; i < response.data.lstcustomerProductDetails.length; i++) {
                        _html += "<tr><td>" + response.data.lstcustomerProductDetails[i].productName + "</td><td>(" + response.data.lstcustomerProductDetails[i].quantity + ")</td><td> @Model.currencyModel.CurrencyCode" + response.data.lstcustomerProductDetails[i].amount + " </td></tr > ";
                    }
                    $("#customerdata").html(_html);
                    $("#Pre-orderCollection").modal("show");
                }
            }
        });
    }

    function MarkAsCollected() {
        var formData = {
            OrderId: $('#hdnOrderId').val()
        };
        $.ajax({
            url: '/Storefront/UpdateOrderMarkAsCollected',
            type: 'POST',
            data: formData,
            success: function (response) {
                if (response.success == true) {
                    $('#markAsCollected').modal('hide');
                    location.reload();
                }
            }
        });
    }


    $('#btnmarkasCollected').click(function () {
        MarkAsCollected();
    })

    function DDlCategoryData() {
        var StoreID = $('#ddlStoreDropdown').val();
        $.ajax({
            type: "GET",
            url: "/Storefront/DropDownListCategory?StoreID=" + StoreID,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.data.id !== 0) {


                    $.each(response.data, function (data, value) {

                        $("#ddlCategoryData").append($("<option></option>").val(value.id).html(value.categoryName));
                        $("#ddlEditCategory").append($("<option></option>").val(value.id).html(value.categoryName));
                    });
                }

            }

        });
    }

    otable1 = $('#InventoryList').DataTable({
        "order": [[0, "desc"]],
        searching: false,
        pagination: false,

        "dom": 'rt<"bottom"flp><"bottom"i>'
    })
    otable1 = $('#BuyerDetails').DataTable({
        "order": [[0, "desc"]],
        searching: false,
        pagination: false,

        "dom": 'rt<"bottom"flp><"bottom"i>'
    })
    otable1 = $('#sales-recon').DataTable({
        "order": [[0, "desc"]],
        searching: false,
        pagination: false,

        "dom": 'rt<"bottom"flp><"bottom"i>'
    })
    otable1 = $('#sales-transactions').DataTable({
        "order": [[0, "desc"]],
        searching: false,
        pagination: false,

        "dom": 'rt<"bottom"flp><"bottom"i>'
    })

</script>
<script type="text/javascript">
    $('#BtnAddStore').click(function () {

        var isValid = true;
        $('#txtSroreName,#StoreImage').each(function () {

            if (!$('#txtSroreName').val()) {
                if ($("#txtSroreName").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtSroreName").parent().after("<div class='validation' style='color:red;margin-bottom: 20px;'>Please enter store name</div>");
                    return isValid = false;
                }
            } else {

                $("#txtSroreName").parent().next(".validation").remove(); // remove it
            }

            if (!$("#StoreImage").val()) {
                if ($("#StoreImage").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#StoreImage").parent().after("<!--<div class='validation' style='color:red;margin-bottom: 20px;'>Please select image</div>-->");
                    return isValid = false;
                }
            } else {
                $("#StoreImage").parent().next(".validation").remove();
            }

        });
        if (isValid == true) {
            var Store = $("#txtSroreName").val();
            var Image = document.getElementById("StoreImage");
            var img = Image.files[0];
            // var mediafile = uploadedpdf.files[0];
            var formData = new FormData();
            formData.append("StoreDisplayName", Store);
            formData.append("Mediafile", img);

            $.ajax({
                url: '/Storefront/SaveStoreDetail',
                type: 'POST',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                dataType: 'json',
                success: function (response) {
                    if (response.success == true) {

                        $("#AddSuccessfull").modal('show');
                        $("#AddStore").modal('hide');
                        window.location.reload();
                        // window.location.href = "/Storefront/Storefront";
                    }
                }
            });
        }
    });

    $('#txtSroreName').focusout(function () {
        var Store = $('#txtSroreName').val();

        $.ajax({
            type: "GET",
            url: "/Storefront/GetStoreName?Name=" + Store,
            //data: { value: value, type: id
            success: function (response) {
                if (response.data.length > 0) {

                    $("#ExistRecord").modal('show');
                    $('#txtSroreName').val("");

                }
            }
        });
    });


</script>
<script type="text/javascript">


    $('#btnAddCategory').click(function () {


        var isValid = true;
        $('#txtCategoryName,#CategoryImage').each(function () {

            if (!$('#txtCategoryName').val()) {
                if ($("#txtCategoryName").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtCategoryName").parent().after("<div class= 'validation' style ='color:red;margin-bottom:20px;'>Please enter category</div>");
                    return isValid = false;
                }
            } else {

                $("#txtCategoryName").parent().next(".validation").remove(); // remove it
            }

            if (!$('#CategoryImage').val()) {
                if ($("#CategoryImage").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#categoryimg").parent().after("<div class='validation' style='color:red;'> Select image</div>");
                    return isValid = false;
                }
            }
            else {


                $("#CategoryImage").parent().next(".validation").remove();
            }


        });
        if (isValid == true) {
            let Category = $("#txtCategoryName").val();
            let Image = document.getElementById("CategoryImage");

            let StoreId = $("#ddlStoreDropdown").val();

            var formData = new FormData();
            formData.append("CategoryName", Category);
            formData.append("Icon", Image.files[0]);
            formData.append("StoreId", StoreId);
            $.ajax({
                url: '/Storefront/SaveCategoryDetail',
                type: 'POST',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                dataType: 'json',
                success: function (response) {
                    if (response.success == true) {
                        $('#txtCategoryName').val('');
                        $('#txtCatImage').val('');
                        $('#txtCatImage').text('');
                        $('#txtReoccur').val('');
                        $("#AddSuccessfullcat").modal('show');
                        $("#AddCategory").modal('hide');
                        POSCategoryData();
                        window.location.href = "/Storefront/Storefront?id=Cart";


                    }
                }
            });
        }
    });

    $('#txtCategoryName').focusout(function () {
        let Category = $("#txtCategoryName").val();
        let StoreId = $("#ddlStoreDropdown").val();
        $.ajax({
            type: "GET",
            url: "/Storefront/GetCategoryName?Name=" + Category + "&StoreId=" + StoreId,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.data.length > 0) {
                    $("#ExistRecord").modal('show');
                    $('#txtCategoryName').val("");

                }
            }
        });
    });

</script>
<script>
    $('#BtnAddProduct').click(function () {
    
        var isValid = true;
        $('#ddlCategoryData,#txtProductname,#Description, #txtsellingPrice,#txtStockthreshold,#txtProductquantity').each(function () {

            if ($('#ddlCategoryData').val() == '0') {
                $("#ddlCategoryData").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'>Please select category</div>");
                return isValid = false;
            }
            else {
                $("#ddlCategoryData").parent().next(".validation").remove();
            }
            if ($('#txtProductname').val() == '') {

                $("#txtProductname").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'>Please enter product</div>");
                return isValid = false;
            }
            else {

                $("#txtProductname").parent().next(".validation").remove(); // remove it
            }

            if ($('#Description').val() == '') {

                $("#Description").parent().after("<div class= 'validation' style ='color:red;margin-bottom: 20px;'>Please enter description</div>");
                return isValid = false;
            }

            else {

                $("#Description").parent().next(".validation").remove();
            }
            //if ($('#txtProductID').val() == '') {
            //    if ($("#txtProductID").parent().next(".validation").length == 0) // only add if not added
            //    {
            //        $("#txtProductID").parent().after("<div class='validation' style ='color:red;margin-bottom: 20px;'>Please enter product ID</div>");
            //        return isValid = false;
            //    }
            //}
            //else {

            //    $("#txtProductID").parent().next(".validation").remove();
            //}



            if ($('#txtsellingPrice').val() == '') {

                $("#txtsellingPrice").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'> Please enter selling price</div>");
                return isValid = false;

            }
            else {


                $("#txtsellingPrice").parent().next(".validation").remove();
            }
            if ($('#txtProductquantity').val() == '') {
                if ($("#txtProductquantity").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtProductquantity").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'>Please enter product quantity</div>");
                    return isValid = false;
                }
            }
            else {


                $("#txtProductquantity").parent().next(".validation").remove();
            }
            if ($('#txtStockthreshold').val() == '') {

                $("#txtStockthreshold").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'>Please enter Stock threshold</div>");
                return isValid = false;

            }
            else {


                $("#txtStockthreshold").parent().next(".validation").remove();
            }

        });
        if (isValid == true) {
          
            let ddlproductList = $("#ddlCategoryData").val();
            let Productname = $("#txtProductname").val();
            let ProductId = $("#txtProductID").val();
            $('#txtProductID').val('');
            let SellingPrice = $("#txtsellingPrice").val();
            let Threshold = $("#txtStockthreshold").val();
            let Productquantity = $("#txtProductquantity").val();
            let StoreId = $("#ddlStoreDropdown").val();
            let Description = $("#Description").val();
           

            var imageUrls = []; 
            $('#MultipleimageidStore .test').each(function() {
            imageUrls.push($(this).attr('src'));
            });


            var formData = new FormData();

            formData.append("CategoryId", ddlproductList);
            formData.append("StoreId", StoreId);
            formData.append("ProductName", Productname);
            formData.append("ProductUniqueID", ProductId);
            formData.append("SellingPrice", SellingPrice);
            formData.append("Threshold", Threshold);
            formData.append("Quantity", Productquantity);
            formData.append("ProductDesc", Description);


            for (var i = 0; i < croppers.length; i++) {
                var articleMediaItem = croppers[i];
                formData.append("Images[" + i + "].ImagePath", articleMediaItem);
                
                var filename = fileImgNames[i];
                formData.append("Images[" + i + "].filename", filename);
            }

            $.ajax({
                url: '/Storefront/SaveProductDetail',

                type: 'POST',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                dataType: 'json',
                success: function (response) {

                    if (response.success == true) {
                        $("#message").text(response.message);
                        $("#ProductSuccessfull").modal('show');
                        $("#AddProduct").modal('hide');
                        $('.addimg-area').hide();
                        setTimeout(function () {
			              window.location.reload();
		                }, 250);
                        
                    }
                    else {
                        $("#message").text(response.message);
                        $("#ProductSuccessfull").modal('show');
                    }
                }

            });


        }

    });

    $('#txtProductname').focusout(function () {
        let product = $("#txtProductname").val();
        let CatID = $("#ddlCategoryData").val();
        $.ajax({
            type: "GET",
            url: "/Storefront/GetProductName?Name=" + product + "&&CategoryID=" + CatID,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.data.length > 0) {
                    $("#ExistRecord").modal('show');
                    $("#txtProductname").val("");
                    $("#AddProduct").modal('hide');
                 
                }
            }
        });
    });
    $('#txtProductID').focusout(function () {
        let product = $("#txtProductname").val();
        let ProductID = $("#txtProductID").val();
        $.ajax({
            type: "GET",
            url: "/Storefront/GetProductID?Name=" + product + "&&ProductID=" + ProductID,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.data.length > 0) {
                    $("#ExistProduct").modal('show');
                    // $("#txtProductID").val('');


                }
            }
        });
    });
</script>
<script>
    function ImageProduct(input) {
        document.getElementById('editProductimg').innerHTML = '';
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            updateimagename = input.files[0].name;
            document.getElementById('editProductimg').innerHTML = input.files[0].name
            $('#editProductimg').val(updateimagename);

        }
    }

    var StoreFrontImage;
    function GetEditValue(id) {
       
        StoreFrontImage=id;
        let ProductID = id;
        $.ajax({
            type: 'GET',
            url: "/Storefront/GetProductByID?id=" + ProductID,
            contentType: "application/json;charset=utf-8",
            dataType: 'json',
            success: function (Result) {
                if (Result.success = true) {
                    $('#HiddenId').val(id);
                    $("#ddlEditCategory").val(Result.data[0].categoryId)
                    $("#txteditProductName").val(Result.data[0].product);
                    $("#txteditProductID").val(Result.data[0].productId);
                    $('#QuantityProductId').val(Result.data[0].productId)

                    var txttxteditSellingPricedecimal = Result.data[0].productcost;

                    $('#txteditSellingPrice').val(txttxteditSellingPricedecimal.toFixed(2));

                    $("#hdnproductID").val(ProductID);
                    $("#txteditQuantity").val(Result.data[0].quantity);
                    $("#txtthreshold").val(Result.data[0].threshold);

                    

                    $('.addimg-area').show();
                     $('#listofimages059').empty();
                    for (i = 0; i < Result.data.length; i++) {
                        if (Result.data[i] && Result.data[i].images && Result.data[i].images.length > 0) {
                            for (j = 0; j < Result.data[i].images.length; j++) {
                                var index = Result.data[i].images[j].imagePath.lastIndexOf("\\") + 1;
                                var filename = Result.data[i].images[j].imagePath.substr(index);
                                var imagePath1 = Result.data[i].images[j].imagePath;
                               // console.log(imagePath1);
                                var html = '<li class=" imgcomm-block "><img class="test" src="' + imagePath1 + '"/><div class="cross-icon image-icon pl-1 "><button type="button" class="cross" id="Savetxtimagemultiplestore" onclick="DltStoreImagesmultiple896(' + Result.data[i].images[j].id + ')"><span aria-hidden="true" >×</span></button></div><p class="text-overr">' + filename + '</p></li>';
                                $('#listofimages059').append(html);
                            }
                        }
                    }

                }
            }
        });
    }






     function DltStoreImagesmultiple896(id) {
        
        var objdata =
        {
            Id: id
        }
        var Aurl = "/Storefront/DleteMultiImageStore";
        $.ajax({
            type: "POST",
            url: Aurl,
            data: objdata,
            success: function (success) {

                if (success.success == true) {
                    GetEditValue(StoreFrontImage); 
                    
                }
                else {

                }
            },
            error: function (request, error) {

            }

        });
    }







    $(document).on("change", '#editProductImage', function (event) {
       
        readSection6ImageStores(this);
    });

    function readSection6ImageStores(input) {
       
        if (input.files && input.files[0]) {
           // console.log(input.files[0]);
            var reader = new FileReader();
            reader.onload = function (e) {
                $(input).closest('.input-container').find("img").attr('src', e.target.result);
            };
            reader.readAsDataURL(input.files[0]);
           // console.log(input.files[0]);
            saveSection6Imgstrore(input.files[0], input);
        }
    }

    function saveSection6Imgstrore(files, input) {
     
        var totalFiles = input.filePath;
        var ext = $(input).val().split('.').pop().toLowerCase();
        ImgSection2Uploads(files, input);
    }

    function ImgSection2Uploads(file, input) {
       
        var formData = new FormData();
        formData.append("ProductId", StoreFrontImage);
        formData.append("ImagePath", file);
        $.ajax({
            type: "POST",
            url: '/Storefront/StoreUploadImageAndFile6',
            data: formData,
            dataType: 'json',
            contentType: false,
            processData: false,
            success: function (success) {
                if (success.success == true) {


                    GetEditValue(StoreFrontImage);

                }
                else {
                  $("#message").text(response.message);
                  $("#ProductSuccessfull").modal('show');
                }
            },
            error: function (error) {
                $("#message").text(response.message);
                $("#ProductSuccessfull").modal('show');
            }
        });
    }











    function GetEditproduct(id) {

        let ProductID = id;
        $.ajax({
            type: 'GET',
            url: "/Storefront/GetProductByID?id=" + ProductID,
            contentType: "application/json;charset=utf-8",
            dataType: 'json',
            success: function (Result) {
                if (Result.success = true) {
                    $("#ddlEditCategory").val(Result.data[0].categoryId)
                    $("#titleheader").val(Result.data[0].product);
                    $("#txteditProductID").val(Result.data[0].id);
                    $('#QuantityProductId').val(Result.data[0].id);
                    $('#QuantityCategoryId').val(Result.data[0].categoryId);
                }
            }
        });
    }





    function cleanImageName(originalName) {
        var regex = /^(.*?)\-\d+x\d+\.(.*?)$/;
        var match = originalName.match(regex);
        if (match && match.length === 3) {
            return match[1] + '.' + match[2];
        } else {
            return originalName;
        }
    }



    $('#btnUpdateProduct').click(function () {


        let Id = $('#HiddenId').val();
        let ddlCategoryList = $("#ddlEditCategory").val();
        let Productname = $("#txteditProductName").val();
        let ProductIds = $("#txteditProductID").val();
        let SellingPrice = $("#txteditSellingPrice").val();
        let Threshold = $("#txtthreshold").val();
        //let ProductID = $("#hdnproductID").val();
        let images = document.getElementById('editProductImage');
        let Productquantity = $("#txteditQuantity").val();
        var formData = new FormData();

        formData.append('Id', Id);
        formData.append("CategoryId", ddlCategoryList);
        formData.append("Product", Productname);
        formData.append("ProductId", Id);
        formData.append("ProductCost", SellingPrice);
        formData.append("Threshold", Threshold);
        formData.append("Quantity", Productquantity);
        formData.append('ProductImage', images.files[0]);

        $.ajax({
            url: '/Storefront/UpdateStockProcductInventory',
            type: 'POST',
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: 'json',
            success: function (response) {
                if (response.success == true) {

                    $('#EditProduct').modal('hide');
                    $('#UpdatedMsg').modal('show');
                    //window.location.href = "/Storefront/Storefront?id=item";



                }
            }

        });

    });

    $("#UpdatedMsgClose").click(function () {
        $('#UpdatedMsg').modal('hide');
        window.location.href = '/Storefront/Storefront?id=Stock'
    });

    $('#btnExportCSV').click(function () {
        var Store = $('#ddlStoreDropdown').val();

        $.ajax({
            type: "GET",
            url: "/Storefront/GetProductExcel?id=" + Store,
            //data: { value: value, type: id
            success: function (response) {


            }
        });
    });


    function GetDeleteValue(Id) {

        var objdata =
        {
            ProductId: Id
        }
        var Aurl = "/Storefront/DeleteStockAndProduct"
        $.ajax({
            type: "POST",
            url: Aurl,
            data: objdata,

            success: function (result) {

                if (result.success == true) {

                    $('#deleteconfimation').modal('show');

                }
            }

        });

    }

    $("#btndeleteProduct").click(function () {
        $('#deleteconfimation').modal('hide');
        $('#deletemessage').modal('show');

    });

    $("#DeletemsgClose").click(function () {
        $('#deletemessage').modal('hide');
        window.location.href = '/Storefront/Storefront?id=Stock'
    });

    $(document).ready(function () {
        if (~window.location.href.indexOf("Stock")) {
            $('.message-tab a[href="#StockInventory"]').tab('show');
        }
    });

    $("#AddSuccessfullClose").click(function () {

        $('#AddSuccessfull').modal('hide');

    });
    $("#AddSuccessfullcatClose").click(function () {

        $('#AddSuccessfullcat').modal('hide');

    });
    $('#btnExistProductClose').click(function () {
        $("#ExistProduct").modal('hide');
        $("#txtProductID").val('');
    });
    $("#ProductSuccessfullClose").click(function () {
        $("#ProductSuccessfull").modal('hide');
        $('#ddlCategoryData').val('0');
        $('#txtProductname').val('');
        $('#Description').val('');
        $('#txtProductImage').val('');
        $('#txtsellingPrice').val('');
        $('#txtProductquantity').val('');
        $('#txtStockthreshold').val('');
    });
    $("#deleteClose").click(function () {
        $('#deleteconfimation').modal('hide');
    });


    $("#btnExistRecordClose").click(function () {
        $('#ExistRecord').modal('hide');

    });
    $("#CartClose").click(function () {
        $('#CartMsg').modal('hide');
        // window.location.href = "/Storefront/Storefront";
    });
    $("#btncreditClose").click(function () {
        $("#CreditNote").modal('hide');
        window.location.href = "/Storefront/Storefront";
    });
    $("#btncreditCllose").click(function () {
        $("#LockedDown").modal('hide');
        //window.location.href = "/Storefront/Storefront";
    });
    $("#btndeleteclose").click(function () {
        $("#Items-Added").modal('hide');
        window.location.href = "/Storefront/Storefront";
    });

    $("#btnCheckout").click(function () {
        $("#bestWash").modal('hide');
    });
    $("#btncloseSuperJob").click(function () {
        $("#Superjob").modal('hide');
        var StoreID = $('#ddlStoreDropdown').val();

        $.ajax({
            type: 'GET',
            url: "/Storefront/Storefront?StoreID=" + StoreID,
            contentType: "application/json;charset=utf-8",
            dataType: 'json',
            success: function (Result) {
                if (Result.success = true) {

                }
            }
        });

    });



    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result)
            };
            imagename = input.files[0].name;
            $('#txtimageName').val(imagename);
            //reader.readAsDataURL(input.files[0]);

        }
    }
    function readURL1(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result)
            };
            imagename = input.files[0].name;
          //  alert(imagename);
            $('#txtimageNames').val(imagename);
            //reader.readAsDataURL(input.files[0]);

        }
    }
    function CatgoryreadURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result)
            };
            imagename = input.files[0].name;
            // alert(imagename);
            $('#txtCatImage').text(imagename);
        }
    }

    
    var croppers = [];
    var fileImgNames = [];
    var fileType = [];
    var fileName;
    var i;



function ProductreadURL(input) { 
    $('.addimg-area').show();
    if (input.files && input.files.length > 0) {
        for (var i = 0; i < input.files.length; i++) {
            fileImgNames.push(input.files[i].name);
              //  console.log(fileImgNames);
            var reader = new FileReader();
            reader.onload = function (e) {
                var imageSrc = e.target.result;       
                var imagename = input.files[0].name;
                
                $('#MultipleimageidStore').append('<li class="imgcomm-block"><img class="test" src="' + imageSrc + '"/><div class="cross-icon image-icon pl-1"><button type="button" class="cross"><span aria-hidden="true" onclick="btndltstorefileimage(this)">×</span></button></div><p class="text-overr">' + imagename + '</p></li>');
                croppers.push(imageSrc);
              //  console.log(croppers);
            };
            reader.readAsDataURL(input.files[i]);
        }
    }
}







    function exportCSVExcelProduct() {

        const currentDate = new Date();
        var abccd = $("#ddlStoreDropdown option:selected").text();
        const day = String(currentDate.getDate()).padStart(2, '0');
        const month = String(currentDate.getMonth() + 1).padStart(2, '0');
        const year = currentDate.getFullYear();
        const formattedDate = `${day}.${month}.${year}`;
        const filename = `${abccd} Stock and Inventory_${formattedDate}.xls`;

        const clonedTable = $('#InventoryList').clone();
        clonedTable.find('th:last-child, td:last-child').remove();
        clonedTable.find('thead tr th:eq(1) img').remove();
        clonedTable.find('tbody tr td:eq(1) img').remove();

        clonedTable.find('thead tr th:first-child img').remove();
        clonedTable.find('tbody tr td:first-child img').remove();
        clonedTable.find('thead tr th:eq(2) img').remove();
        clonedTable.find('tbody tr td:eq(2) img').remove();

        clonedTable.table2excel({
            delivery: 'value',
            filename: filename
        });
    }


    //function exportCSVExcelbuyer() {
    //    const currentDate = new Date();
    //    const day = String(currentDate.getDate()).padStart(2, '0');
    //    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
    //    const year = currentDate.getFullYear();
    //    const formattedDate = `${day}-${month}-${year}`;
    //    const filename = `BuyerList_${formattedDate}.xls`;
    //    $('#sales-transactions').table2excel({
    //        exclude: ".no-export",
    //        filename: filename,
    //        fileext: ".xls",
    //        exclude_links: true,
    //        exclude_inputs: true
    //    });
    //}

    function exportCSVExcelbuyer() {

        const currentDate = new Date();
        var abcc = $("#ddlStoreDropdown option:selected").text();
        const day = String(currentDate.getDate()).padStart(2, '0');
        const month = String(currentDate.getMonth() + 1).padStart(2, '0');
        const year = currentDate.getFullYear();
        const formattedDate = `${day}.${month}.${year}`;
        const filename = `${abcc} Sales Transactions_${formattedDate}.xls`;

        const clonedTable = $('#sales-transactions').clone();


        clonedTable.find('thead tr th:first-child img').remove();
        clonedTable.find('tbody tr td:first-child img').remove();

        clonedTable.find('thead tr th:eq(1) img').remove();
        clonedTable.find('tbody tr td:eq(1) img').remove();
        clonedTable.find('thead tr th:eq(4) img').remove();
        clonedTable.find('tbody tr td:eq(4) img').remove();

        clonedTable.find('thead tr th:eq(5) img').remove();
        clonedTable.find('tbody tr td:eq(5) img').remove();
        clonedTable.find('thead tr th:eq(3) img').remove();
        clonedTable.find('tbody tr td:eq(3) img').remove();

        //clonedTable.find('tbody tr td:nth-child(4)').each(function () {
        //    const mobileNumber = $(this).text();
        //    // if (mobileNumber.startsWith('+')) {
        //    //     $(this).text("'" + mobileNumber);
        //    // }

        //    $(this).text("'" + mobileNumber);

        //});

        clonedTable.table2excel({
            delivery: 'value',
            filename: filename
        });

    }
    function ClearCart() {
        var StoreID = $('#ddlStoreDropdown').val();
        var formData = {
            StoreId: StoreID
        }
        $.ajax({
            type: "Post",
            url: "/Storefront/ClearCart",
            data: formData,
            success: function (response) {

                if (response.success == true) {
                    ItemCart();
                   // window.location.reload();
                }
            }
        });
    }


    $("#btnAddSchedule").click(function () {
        // alert("1");
        var isValid = true;
        $('#txtScheduleItem,#txtopenTime,#txtCloseTime').each(function () {

            if (!$('#txtScheduleItem').val()) {
                if ($("#txtScheduleItem").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtScheduleItem").parent().after("<div class= 'validation' style = 'color:red;margin-bottom: 20px;'>Please enter schedule name</div>");
                    return isValid = false;
                }
            } else {

                $("#txtScheduleItem").parent().next(".validation").remove(); // remove it
            }
            if (!$('#txtopenTime').val()) {
                if ($("#txtopenTime").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtopenTime").after("<div class= 'validation' style = 'color:red;'>Please enter open time</div>");
                    return isValid = false;
                }
            } else {

                $("#txtopenTime").parent().next(".validation").remove(); // remove it
            }
            if (!$('#txtCloseTime').val()) {
                if ($("#txtCloseTime").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#txtCloseTime").after("<div class= 'validation' style = 'color:red;'>Please enter close time</div>");
                    return isValid = false;
                }
            } else {

                $("#txtCloseTime").parent().next(".validation").remove(); // remove it
            }

        });

        if (isValid == true) {
            var StoreID = $("#ddlStoreDropdown").val();
            var Scheduleitem = $("#txtScheduleItem").val();
            var OpenTime = $("#txtopenTime").val();
            //  alert(OpenTime);
            var CloseTime = $("#txtCloseTime").val();
            // alert(CloseTime);
            var Days = $(".Addchk");
            var Daysvalue = "";
            for (var i = 0; i < Days.length; i++) {
                if (Days[i].checked == true) {

                    Daysvalue += Days[i].value + ",";

                }
            }
            var formData = new FormData();
            formData.append("Title", Scheduleitem);
            formData.append("OpenTime", OpenTime);
            formData.append("ClosedTime", CloseTime);
            formData.append("Days", Daysvalue);
            formData.append("StoreId", StoreID);
            $.ajax({
                type: "Post",
                url: "/Storefront/SavePreOrderSlots",
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                dataType: 'json',
                success: function (response) {

                    if (response.success == true) {
                        $('#txtScheduleItem').val('');
                        $('#txtopenTime').val('');
                        $('#txtCloseTime').val('');
                        $(".week-bx Days").removeClass('active');
                        $(".week-bx Days").css('background-color', '#ECECEC');

                        $('#LockedDown').modal('show');
                        getpre();
                       // window.location.href = "/Storefront/Storefront?id=item";

                    }
                }
            });
        }

    });

    function btndltstorefileimage(button) {
    var $li = $(button).closest('.imgcomm-block');
    var indexToRemove = $li.index();
    croppers.splice(indexToRemove, 1);  
    $li.remove();
   // console.log(croppers);
    
}

    function fnEditschedule(Id) {
        let ScheduleId = Id;
        $.ajax({
            type: "GET",
            url: "/Storefront/EditScheduleData?ID=" + ScheduleId,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.data.length > 0) {
                    $("#txttitle").val(response.data[0].title);
                    $("#txtopentime").val(response.data[0].openTime);
                    $("#txtclosetime").val(response.data[0].closedTime);
                    $("#hdnTimeSlotID").val(ScheduleId);
                    var string = response.data[0].days;
                    var array = string.split(',');
                    for (var i = 0; i < array.length; i++) {
                        if (array[i] == "1") {
                            document.getElementById("monday").checked = true;

                        }
                        else if (array[i] == "2") {
                            document.getElementById("tuesday").checked = true;
                        }
                        else if (array[i] == "3") {
                            document.getElementById("wednesday").checked = true;
                        }
                        else if (array[i] == "4") {
                            document.getElementById("thusday").checked = true;
                        }
                        else if (array[i] == "5") {
                            document.getElementById("friday").checked = true;
                        }
                        else if (array[i] == "6") {
                            document.getElementById("saturday").checked = true;
                        }
                        else if (array[i] == "7") {
                            document.getElementById("sunday").checked = true;
                        }
                    }

                }
            }
        });
    }
    $("#ddlStoreDropdown").change(function () {
        $("#ddlCategoryData").empty();
        $("#POSProductDetail").empty();
        getpre();
        DDlCategoryData();
        POSCategoryData();
        ItemCart();
        BuyerDetails();
        CashRagister();
        Walletballace();


        var StoreID = $('#ddlStoreDropdown').val();
        var img = "<img src='/images/Delete2.png'/>";
        var editimg = "<img src='/images/Edit-Square.png'/>";
        var ID = $("#hdnDeleteid").val();


        $.ajax({
            type: "GET",
            url: "/Storefront/StockListbind?StoreID=" + StoreID,
            //data: { value: value, type: id },
            success: function (response) {
                if (response.success == true) {
                    $("#InventoryTable").empty();
                    var data = response.data.length;
                    for (var i = 0; i < data; i++) {

                        var Modal = "<span class=mr-3 data-target=#EditProduct data-toggle=modal onclick=GetEditValue(" + response.data[i].id + ")>" + editimg + "</span>";
                        var Modall = "<span class=mr-3 data-target=#EditProducts data-toggle=modal onclick=GetEditproduct(" + response.data[i].id + ")>" + editimg + "</span>";
                        var newRowContent = "<tr><td>" + Modal + response.data[i].product + "</td><td>" + response.data[i].categoryName + " </td><td>" + response.data[i].productcost + " </td><td>" + response.data[i].quantity + Modall + "</td><td>" + response.data[i].threshold + " </td><td>" + response.data[i].entryStatus + "</td><td>" + img + " </td></tr>";
                        $("#InventoryList tbody").append(newRowContent);
                    }

                }
            }
        });
    });

    function ItemCart() {
        var StoreID = $('#ddlStoreDropdown').val();
        var NoofItems = $("#Checkoutitems").val();
        $.ajax({
            type: "GET",
            url: "/Storefront/POSItemCartBind?StoreID=" + StoreID,

            success: function (response) {
                if (response.success == true) {
                    var data = response.data.length;
                    $("#dvCart").empty();
                    var list = $("#dvCart").append('<ul></ul>').find('ul');
                    var Amount = 0;
                    var Quantity = 0;
                    for (var i = 0; i < data; i++) {

                        list.append('<li><div class="d-flex justify-content-between align-content-center"><div class="username-bx">' + response.data[i].productName + '</div><div class="d-flex align-items-center countcontainer"><input type="hidden" id="hdncartProductID" class="hdncartProductID" value=' + response.data[i].productId + '><div class="counter"><input class="counter__input count" type="text" value=' + response.data[i].quantity + '  name="counter" size="5" readonly="readonly"/><a class="counter__increment valueCount" id="btnplus" href="#" data-factor="+1">+</a><a class="counter__decrement valueCount" id="btnMinus" href="#" data-factor="-1">&ndash;</a></div><div class="username-bx dvCartAmount" style="border:0px">@Model.currencyModel.CurrencyCode<input class="counter_input amount" type="text" value="' + response.data[i].amount.toFixed(2) + '"  name="counter" size="5" readonly="readonly"/></div></div></div></li>');

                        Amount += parseFloat(response.data[i].amount);
                        Quantity += parseFloat(response.data[i].quantity);
                    }
                    $("#Checkoutitems").text("(" + Quantity +  " Items)");
                    $("#checkoutPrice").text("" + Amount.toFixed(2));
                    $('#txtCheckoutamount').val($("#checkoutPrice").text());
                }
            }
        });
    }



    function POSCategoryData() {

        var StoreID = $('#ddlStoreDropdown').val();

        $.ajax({
            type: "GET",
            url: "/Storefront/POSCategoryBind?StoreID=" + StoreID,

            success: function (response) {
                if (response.success == true) {
                    var data = response.data.length;
                    $("#PosCategory").empty();
                    var list = $("#PosCategory").append('<ul></ul>').find('ul');
                    for (var i = 0; i < data; i++) {
                       // alert(response.data[i].icon);
                        var image = "<img src='" + response.data[i].icon + "'/>";
                        list.append('<li><div class="circle-icon" onclick="fnGetProduct(' + response.data[i].id + ')">' + image + '</div><span>' + response.data[i].categoryName + '</span></li>');
                    }
                }
            }
        });

    }

    function fnGetProduct(Id) {

        $('.circle-box  li a').removeClass("active");
        $('#' + Id).closest('a').addClass("active");
        var StoreID = $('#ddlStoreDropdown').val();
        let CategoryID = Id;

        $.ajax({
            type: "GET",
            url: "/Storefront/POSProductBind?StoreID=" + StoreID + "&CategoryID=" + CategoryID,

            success: function (response) {
                console.log(response);
                if (response.success == true) {
                
                    var data = response.data.length;
                    $("#POSProductDetail").empty();
                    var list = $("#POSProductDetail").append('<ul></ul>').find('ul');
                    for (var i = 0; i < data; i++) 
                    {

                    //    for (i = 0; i < response.data.length; i++) {
                    //    if (response.data[i] && response.data[i].images && response.data[i].images.length > 0) {
                    //        for (j = 0; j < response.data[i].images.length; j++) {
                    //            var index = response.data[i].images[j].imagePath.lastIndexOf("\\") + 1;
                    //            var filename = response.data[i].images[j].imagePath.substr(index);
                    //            var imagePath1 = "<img src='" + response.data[i].images[j].imagePath + "'/>";
                    //            //var imagePath1 = response.data[i].images[j].imagePath; 
                    //            console.log(imagePath1);
                                
                    //        }
                    //    }
                    //}
                   
                       
                        //console.log(response.data);
                        var image = "<img src='" + response.data[i].images[0].imagePath + "'/>";
                        list.append('<li><div class="circle-icon" data-id=' + response.data[i].id + ' > ' + image + ' </div><span>' + response.data[i].productName + '</span> <div id="SellingPrice" class= "font-weight-bold fs-16"> <h6>@Model.currencyModel.CurrencyCode ' + response.data[i].sellingPrice.toFixed(2) + '</h6></div></li >');

                    }
                }
            }

        });


    }


    function fninsertItem(ID, Productname, amount, Quantity) {
        var ProductID = ID;
        var StoreID = $('#ddlStoreDropdown').val();
        //alert(amount);
        var formData = new FormData();
        formData.append("ProductId", ProductID);
        formData.append("Amount", amount);
        if (Productname == "") {
            formData.append("Quantity", Quantity);
        }
        else {
            formData.append("Quantity", "1");

        }
        formData.append("StoreID", StoreID)

        $.ajax({
            type: "Post",
            url: "/Storefront/SaveItemCart",
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: 'json',
            success: function (response) {

                if (response.success == true) {

                    //  $("#CartMsg").modal('show');
                    //window.location.href = "/Storefront/Storefront?id=Cart";
                    //  window.location.reload();
                    ItemCart();

                }

            }
        });


    }



    $(document).ready(function () {       
        getpre();
        BuyerDetails();
        CashRagister();
        Walletballace();
    });

    function formatDateTime(dateTimeString) {
        const dateTime = new Date(dateTimeString);
        const date = dateTime.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: 'numeric' }).replace(/\//g, '.');
        const time = dateTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
        return `${date} ${time}`;

    }
    function BuyerDetails() {
        var StoreID = $('#ddlStoreDropdown').val();
        var startDate = $("#datefrom").val();
        var endDate = $("#dateTo").val();
        var imgSrc = "/images/Show.png";

        $.ajax({
            type: "GET",
            url: "/Storefront/BuyerListbind",
            data: {
                StoreID: StoreID,
                Startdate: startDate,
                Enddate: endDate
            },
            success: function (response) {
                if (response.success) {
                    var newRowData = response.data.map(item => {
                        var status = item.status == 0 ? "Cash" : "Wallet";
                        var currencyCode = "@Model.currencyModel.CurrencyCode";
                        var amount = item.amount.toFixed(2);
                        var formattedDate = formatDateTime(item.orderDate);

                        return `
                            <tr>
                                <td>${item.buyerName} <img src='${imgSrc}' onclick='fnGetBuyerDetail(${item.id})'></td>
                                <td>${item.mobile}</td>
                                <td>${formattedDate}</td>
                                <td>${status}</td>
                                <td>${currencyCode}${amount}</td>
                            </tr>`;
                    }).join("");

                    $("#sales-transactions tbody").html(newRowData);
                } else {
                    $("#sales-transactions tbody").html('');
                }
            },
            error: function () {
                $("#sales-transactions tbody").html('');
            }
        });
    }
    function fnGetBuyerDetail(id) {
        let buyerId = id;
        var img = "<button type=button class=btn-link btn data-dismiss=modal data-toggle=modal data-target=#delete-confimation><img src='/images/Delete2.png'/></button>";
        $.ajax({
            type: "GET",
            url: "/Storefront/BuyerProductBind?BuyerId=" + buyerId,
            success: function (response) {
                if (response.success == true) {
                    if (response.data.length > 0) {
                        
                        $('#lblOrderID').text('Order no ' + response.data[0].orderID);

                        var newRowData = '';
                        var Amount = 0;
                        for (var i = 0; i < response.data.length; i++) {
                            newRowData += "<tr><td>" + response.data[i].productName + "</td><td>" + response.data[i].quantity + "</td><td> @Model.currencyModel.CurrencyCode " + response.data[i].amount.toFixed(2) + "</td></tr>";
                            Amount += parseFloat(response.data[i].amount);
                        }
                        $("#tblBuyerProduct tbody").html(newRowData);
                        $("#dvTotalItems").text(response.data.length + " Items");
                        $("#dvPrice").text("Total: @Model.currencyModel.CurrencyCode " + Amount.toFixed(2));
                    } else {
                        $("#tblBuyerProduct tbody").html('');
                    }
                    $("#OrderReview").modal('show');
                }
            }
        });
    }

    //function fnGetBuyerDetail(id) {


    //    let buyerId = id;
    //    var img = "<button type=button class=btn-link btn data-dismiss=modal data-toggle=modal data-target=#delete-confimation><img src='/images/Delete2.png'/></button>";
    //    $.ajax({
    //        type: "GET",
    //        url: "/Storefront/BuyerProductBind?BuyerId=" + buyerId,

    //        success: function (response) {
    //            if (response.success == true) {
    //                if (response.data.length > 0) {
    //                    $('#lblOrderID').text(response.data[0].orderID);
    //                   // $("#lblUserDetail").text(response.data[0].customerName + '|' + response.data[0].mobile + '|' + response.data[0].orderID);
    //                    var newRowData = '';
    //                    var Amount = 0
    //                    for (var i = 0; i < response.data.length; i++) {
    //                        newRowData += " <tr><td>" + response.data[i].productName + "</td><td>" + response.data[i].quantity + "</td><td> @Model.currencyModel.CurrencyCode " + response.data[i].amount.toFixed(2) + "</td></tr>";
    //                        Amount += parseFloat(response.data[i].amount);
    //                    }
    //                    $("#tblBuyerProduct tbody").html(newRowData);
    //                    $("#dvTotalItems").text(response.data.length + "Items");
    //                    $("#dvPrice").text("Total: @Model.currencyModel.CurrencyCode " + Amount.toFixed(2))
    //                } else {
    //                    $("#tblBuyerProduct tbody").html('');
    //                }
    //                $("#OrderReview").modal('show');
    //            }
    //        }
    //    });

    //}
    //Delete editsales
    function deleteidActive(Id) {


        $("#deleteSalesconfimation").modal("show");
        $("#salesId").val(Id);
    }
    $(document).on("click", "#deleteSalesClose", function () {
        $("#deleteSalesconfimation").modal("hide");
    });

    //$(document).on("click", "#btndeleteProduct", function () {
    //    alert('ok');
    //    var objdata = {
    //        Id: $("#salesId").val()
    //    }
    //    console.log(objdata);
    //    var Aurl = "/Storefront/DeleteSalesItemsAsync";
    //    $.ajax({
    //        type: "Post",
    //        url: Aurl,
    //        data: objdata,
    //        success: function (Result) {
    //            console.log(Result);
    //            //if (Result.Status == true) {
    //            //    $("#deleteconfimation").modal("hide");
    //            //    $("#Items-Added").modal("show");
    //            //    $("#itemaddheader").text('Active Item Deleted!');
    //            //    $("#message").text(Result.message);


    //            //}
    //            //else {
    //            //    $("#deleteconfimation").modal("hide");
    //            //    $("#Items-Added").modal("show");
    //            //    $("#itemaddheader").text('Active Item Deleted!');
    //            //    $("#message").text(Result.message);
    //            //}
    //        },
    //        error: function (request, error) {
    //            $("#Items-Added").modal("show");
    //            $("#itemaddheader").text('Something went wrong!');
    //            $("#message").text(error);
    //        }

    //    });
    //});



    $("#btnUpdateTimeSlot").click(function () {
        var StoreID = $("#ddlStoreDropdown").val();
        var title = $("#txttitle").val();
        var opentime = $("#txtopentime").val();
        var closetime = $("#txtclosetime").val();
        var TimeSlotID = $("#hdnTimeSlotID").val();
        var Days = $(".Editchk");
        var Daysvalue = "";
        for (var i = 0; i < Days.length; i++) {
            if (Days[i].checked == true) {

                Daysvalue += Days[i].value + ",";

            }
        }
        var formData = new FormData();
        formData.append("Title", title);
        formData.append("OpenTime", opentime);
        formData.append("ClosedTime", closetime);
        formData.append("Days", Daysvalue);
        formData.append("StoreId", StoreID);
        formData.append("ID", TimeSlotID);
        $.ajax({
            type: "Post",
            url: "/Storefront/UpdateTimeSlots",
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: 'json',
            success: function (response) {

                if (response.success == true) {

                    $('#LockedDown').modal('show');
                    $('#EditSchedule').modal('hide');
                    getpre();
                }

            }
        });

    });
    function RefundProcess() {
        var CustomerId = $("#Searchcustomerid").val();
        var StoreId =$("#ddlStoreDropdown").val();
        var txtrefundamount = $("#txtrefundamount").val();
        var txtCreditnotes = $("#txtCreditnotes").val();
        var formData = new FormData();
        formData.append("Amount", txtrefundamount);
        formData.append("RefundNote", txtCreditnotes);
        formData.append("UserId", CustomerId);
        formData.append("StoreId", StoreId);
        $.ajax({
            type: "Post",
            url: "/Storefront/Refundamount",
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: 'json',
            success: function (response) {

                if (response.success == true) {

                    $("#CreditNote").modal('show');

                }

            }
        });

    }
    $("#btnprocessPayment").click(function () {
        var StoreID = $("#ddlStoreDropdown").val();
        var Checkout = $("#txtCheckoutamount").val();
        var Cash = $("#txtCash").val();
        var Change = $("#txtChange").val();
        var NoofItems = $("#dvCheckoutCount").text().trim().replace("Total (", "").replace(" Items)", "");

        var changeValue = parseFloat(Change);
        var changeinput = $("#txtChange");
       
        changeinput.removeClass("input-error");

        if (isNaN(changeValue) || changeValue < 0) {
            changeinput.addClass("input-error"); 
            //alert("Invalid change amount. Please check your inputs.");
            return false; 
        }

        var formData = new FormData();
        formData.append("StoreID", StoreID);
        formData.append("TotalAmount", Checkout);
        formData.append("Quantity", NoofItems);

        $.ajax({
            type: "Post",
            url: "/Storefront/CheckoutPayment  ",
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: 'json',
            success: function (response) {
                if (response.success == true) {
                    $("#bestWash").modal('show');
                    window.location.reload();
                } else {
                    $("#CashSale").modal('show');
                    alert("Payment processing failed. Please try again.");
                }
            },
            error: function () {
                alert("An error occurred while processing the payment.");
            }
        });
    });




    $(function () {
        $("#txtSearchUser").autocomplete({
            source: function (request, response) {
                var searchList = $('#txtSearchUser').val()
                var formdata = new FormData();
                formdata.append('Search', searchList);
                $.ajax({
                    url: '/Message/GetUserContactList',
                    data: formdata,
                    dataType: "json",
                    type: "POST",
                    contentType: false,
                    processData: false,
                    dataFilter: function (Result) { return Result; },
                    success: function (Result) {
                        var Spont = Result[0].customerId;
                        $("#Searchcustomerid").val(Spont);
                        response($.map(Result, function (item) {

                            return {
                                label: item.name,
                                //value: item.mobile,

                            }
                        }))
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        var err = eval("(" + XMLHttpRequest.responseText + ")");

                    }
                });

            },
            select: function (e, i, s) {
                $("#ContactList").val(i.item.name);
                //SelectecDataSearch(i.item.label, i.item.value, i.item.id);
                //return false;
            },
            focus: function (event, ui) {
                event.preventDefault();
                $('#txtSearchUser').val(ui.item.label);
            },
            minLength: 1 //This is the Char length of inputTextBox
        });

    });
    $(function () {
        $("#txtSearchPreorder").autocomplete({
            source: function (request, response) {
                var searchList = $('#txtSearchPreorder').val()
                var formdata = new FormData();
                formdata.append('Search', searchList);
                $.ajax({
                    url: '/Message/GetUserContactList',
                    data: formdata,
                    dataType: "json",
                    type: "POST",
                    contentType: false,
                    processData: false,
                    dataFilter: function (Result) { return Result; },
                    success: function (Result) {
                        var Spont = Result[0].customerId;
                        $("#Searchcustomerid").val(Spont);
                        response($.map(Result, function (item) {

                            return {
                                label: item.name,
                                //value: item.mobile,

                            }
                        }))
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        var err = eval("(" + XMLHttpRequest.responseText + ")");

                    }
                });

            },
            select: function (e, i, s) {
                $("#ContactList").val(i.item.name);
                //SelectecDataSearch(i.item.label, i.item.value, i.item.id);
                //return false;
            },
            focus: function (event, ui) {
                event.preventDefault();
                $('#txtSearchPreorder').val(ui.item.label);
            },
            minLength: 1 //This is the Char length of inputTextBox
        });

    });

    function fnGetPOSCartDetail() {
        // alert("1");

        var StoreID = $('#ddlStoreDropdown').val();
        //var img = "<button type=button class=btn-link btn data-dismiss=modal data-toggle=modal data-target=#delete-confimation><img src='/images/Delete2.png'/></button>";
        $.ajax({
            type: "GET",
            url: "/Storefront/GetPOSCartDetails?StoreID=" + StoreID,

            success: function (response) {
                if (response.success == true) {
                    $("#hdnOrderId").val(response.data[0].orderId);
                   // $("#lblCustomerDetail").text(response.data[0].customerName + ' | ' + response.data[0].mobile);
                    $("#hdnMobileNo").val(response.data[0].mobile);
                    $("#dvCheckout").empty();
                    var data = response.data.length;
                    var list = $("#dvCheckout").append('<ul class="h-220px overflow-auto storefront-left"></ul>').find('ul');
                    var Amount = 0;
                    var Quantity = 0;
                    for (var i = 0; i < data; i++) {

                        list.append('<li><div class="d-flex justify-content-between align-content-center"><div class="username-bx">' + response.data[i].productName + '</div><div class="d-flex align-items-center Checkoutcontainer"><div class=""><input class="counter__input CheckoutValue" type="text" value=' + response.data[i].quantity + '  name="counter" size="5" readonly="readonly"/></div><div class="username-bx Cartamount">  @Model.currencyModel.CurrencyCode' + response.data[i].amount.toFixed(2) + '</div></div></div></li>');

                        Amount += parseFloat(response.data[i].amount);
                        Quantity += parseFloat(response.data[i].quantity)
                    }
                    $("#dvCheckoutCount").text("Total (" + Quantity + " Items)");
                    $("#dvCheckoutPrice").text(" @Model.currencyModel.CurrencyCode " + Amount.toFixed(2));
                    $("#Checkout").modal('show');
                }
                else {
                    $("#dvCheckout").empty();
                    $("#Checkout").modal('hide');
                }
            }
        });
    }

    //$("#btnplus").on("click", function (){
    //    //var Qty=  $(".counter__input count").val();
    //    var amt = $(".counter_input amount").val();
    //    var newamt+=amt;
    //    $(".counter_input amount").val(newamt);
    //});



    //$("#txtMobileVerify").on('click', function () {

    //    var obj = new Object()
    //    obj.StoreID = $('#ddlStoreDropdown').val();
    //    obj.Amount = $("#dvCheckoutPrice").text().replace(" @Model.currencyModel.CurrencyCode ", "");
    //    obj.Quantity = $("#dvCheckoutCount").text();
    //    obj.Mobile = $("#hdnMobileNo").val();
    //    obj.OrderId = $("#hdnorderid").val();
    //    $.post("/Storefront/CreateOrderQr1", obj, function (data) {
    //        if (data.success == true)
    //        {
    //
    //            var index = data.response.lastindexof("/") + 1;
    //            var filename = data.response.substr(index);
    //            var paymentimg = "<img class='img-fluid' src='/paymentqrcode/" + filename + "'/>";
    //            $("#scanpay").modal("show");
    //            $('#paymentqr').prepend(paymentimg);
    //            $("#paymentQR").replaceWith("<img src='" + data.Message + "' alt='avtar' id='paymentqrimage' style='width:-webkit-fill-available' />");
    //        }
    //    });
    //})



    $("#txtMobileVerify").on('click', function () {

        var obj = new Object()
        obj.StoreID = $('#ddlStoreDropdown').val();
        obj.Amount = $("#dvCheckoutPrice").text().replace("@Model.currencyModel.CurrencyCode ", "");
        obj.NoOfItems = $("#dvCheckoutCount").text().trim().replace("Total (", "").replace(" Items)", "");
        // "Total (" + Quantity + " Items)"
        obj.Mobile = $("#hdnMobileNo").val();
        obj.OrderId = $("#hdnOrderId").val();


        var Aurl = "/Storefront/CreateOrderQr1";
        $.ajax({
            type: "GET",
            url: Aurl,
            data: obj,
            dataType: "json",
            success: function (Result) {
                var status = Result.success;
                if (status == true) {
                    $('#paymentQR11').attr("src", Result.data.qrCode1.qrPath);
                    a = Result.data.qrCode1.qrPath;
                }
                $('#ScanPay').modal("show");
            }

        });
    });



    function onScanSuccess(qrCodeMessage) {
        document.getElementById('result').innerHTML = '<span style="padding:0px" class="result">' + qrCodeMessage + '</span><div><button id="processorder2" style="background-color:#1F3449;color:#2ecfb3; border-radius:11px; ">Process Order</button></div>';
    }
    function onScanError(errorMessage) {
        //handle scan error
    }
    //var html5QrcodeScanner = new Html5QrcodeScanner(
    //    "reader", { fps: 10, qrbox: 250 });
    //html5QrcodeScanner.render(onScanSuccess, onScanError);

    $(document).ready(function () {

        $(" #POSProductDetail .circle-box ul li:first-child a").addClass("active");
        $(document).on('click', '.circle-icon', function () {
            $(".circle-box li").removeClass("active");
            $(this).closest('li').addClass("active");
            var Productname = $("#POSProductDetail .active span").text();
            var amount = $("#POSProductDetail .active #SellingPrice.font-weight-bold.fs-16").text().replace(' @Model.currencyModel.CurrencyCode', "");
            //alert(amount);
            var AmountSellingPrice = $(this).attr("data-id1");
            //alert(AmountSellingPrice);
            var ID = $(this).attr("data-id");
            fninsertItem(ID, Productname, amount, "");
        });
    });
    function AddClassProduct() {
        $(".span").removeClass("Product");
        $(this).addClass("Product");
    }

    //OTP

    $("#btnSaveRefund").on("click", function () {
        var Aurl = "/Storefront/SendOtpForWithdrawal";
        $.ajax({
            type: "Post",
            url: Aurl,
            cache: false,
            contentType: false,
            processData: false,
            dataType: "json",
            success: function (Result) {
                if (Result.success == true) {
                    // $("#otpmsg").text('OTP sent on your register email Id');
                    $("#ProcessRefund").modal("hide");
                    $("#SecurityProceed").modal("show");

                }
                else {
                    $("#errormsg").text(Result.message);
                }
            },
            error: function (request, error) {
                $('#txtwithdrawalpassword').focus();
                document.getElementById("txtwithdrawalpassword").style.border = "1px solid red";
            }
        });
    });


    $("#btnWithdrawalverify").on("click", function () {

        var otp = $('#txtwithdrawalpassword').val().trim();
        if (otp == "") {
            $('#txtwithdrawalpassword').focus();
            document.getElementById("txtwithdrawalpassword").style.border = "1px solid red";
            return false;
        }
        var formData = new FormData();
        formData.append("otp", otp);
        var Aurl = "/Storefront/VerifyPassword";
        $.ajax({
            type: "Post",
            url: Aurl,
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: "json",
            success: function (Result) {
                if (Result.success == true) {
                    $('#txtwithdrawalpassword').focus();
                    document.getElementById("txtwithdrawalpassword").style.border = "1px solid grey";
                    $('#txtwithdrawalpassword').val('');
                    $("#SecurityProceed").modal("hide");
                    RefundProcess();

                }
                else {
                    $('#txtwithdrawalpassword').focus();
                    document.getElementById("txtwithdrawalpassword").style.border = "1px solid red";
                }
            },
            error: function (request, error) {
                $('#txtwithdrawalpassword').focus();
                document.getElementById("txtwithdrawalpassword").style.border = "1px solid red";
            }
        });
    });

    //DELETE STORE

    function deleteStoreActive() {
        $("#delete-storeconfimation").modal("show");
        //  $("#StoreId").val(Id);
    }
    $(document).on("click", "#btnstoreno", function () {
        $("#delete-storeconfimation").modal("hide");
    });

    $(document).on("click", "#btnstoreyes", function () {
        var objdata = {
            Id: $("#ddlStoreDropdown option:selected").val()
        }
        var Aurl = "/Storefront/DeleteStore";
        $.ajax({
            type: "Post",
            url: Aurl,
            data: objdata,
            success: function (Result) {
                if (Result.Status = true) {
                    $("#delete-storeconfimation").modal("hide");
                   // $("#Items-Added").modal("show");
                    $("#itemaddheader").text('');
                    $("#message").text(Result.message);
                    window.location.reload();
                }
                else {
                    $("#delete-storeconfimation").modal("hide");
                //    $("#Items-Added").modal("show");
                    $("#itemaddheader").text('');
                    $("#message").text(Result.message);
                }
            },
            error: function (request, error) {
               // $("#Items-Added").modal("show");
                $("#itemaddheader").text('Something went wrong!');
                $("#message").text(error);
            }

        });
    });

    //QR

    function GenerateAttendanceQRbtn() {


        var Aurl = "/Storefront/AttendanceQRCode";
        $.ajax({

            type: "GET",
            url: Aurl,
            dataType: "json",
            success: function (Result) {
                var status = Result.success;

                if (status == true) {

                    var qrCodeImageUrl = Result.data.qrPath
                    window.open(qrCodeImageUrl, '_blank');
                }
            },
            error: function (request, error) {
                //$("#erroritem").modal("show");
                //$("#errmsg1").text("Oops! something went wrong")
            }
        });
    }

    //calculate
    function percentage_2() {
        var totalamount = $("#txtCheckoutamount").val();
        var cash = $("#txtCash").val();
        var change = parseFloat(cash) - parseFloat(totalamount);

        $("#txtChange").val(change);

    }

    $(document).on("click", "#btnEmailSend", function () {
        SentEmailCashRegisterRecon();
    })

    function SentEmailCashRegisterRecon() {

        var ReconEmail = $("#EmailInput").val();
        var Totalsales = $('#HiddTotalSales').val();
        var Circularpayment = $('#HidCircularPayment').val();
        var Cashsales = $('#HidCashSales').val();
        var TotalReceipent = $('#HidTotalRecipts').val();

        var formdata = new FormData();
        formdata.append('Email', ReconEmail);
        formdata.append('TotalSales', Totalsales);
        formdata.append('Circularpayment', Circularpayment);
        formdata.append('CashSales', Cashsales);
        formdata.append('TotalReceipent', TotalReceipent);

        $.ajax({
            type: 'POST',
            url: "/Storefront/StorefrontReconEmail",
            cache: false,
            contentType: false,
            processData: false,
            data: formdata,
            dataType: 'json',
            success: function (result) {
             
                  $("#Mailbot").modal("hide");

                $("#Items-Added").modal("show");
                $("#itemaddheader").text('Mail sent successfully.');
                $("#message").text(Result.message);
            }
        });

    }

    $(document).on("click", "#btnsalesclose", function () {
        $("#Items-Added").modal('hide');
    });
    //delete pre ordering

    function deletepreActive(Id) {

        $("#deletepreconfimation").modal("show");
        $("#preId").val(Id);
    }
    $(document).on("click", "#deletepreClose", function () {
        $("#deletepreconfimation").modal("hide");
    });

    $(document).on("click", "#btndeletepre", function () {
        var objdata = {

            Id: $("#preId").val()
        }
        var Aurl = "/Storefront/DeletePreOrdering";
        $.ajax({
            type: "Post",
            url: Aurl,
            data: objdata,
            success: function (Result) {
                if (Result.Status = true) {
                    $("#deletepreconfimation").modal("hide");
                    $("#Items-Added").modal("show");
                    $("#itemaddheader").text('Timeslot deleted successfully.');
                    $("#message").text(Result.message);
                    getpre();
                }
                else {
                    $("#deletepreconfimation").modal("hide");
                    $("#Items-Added").modal("show");
                    $("#itemaddheader").text('Timeslot deleted successfully.');
                    $("#message").text(Result.message);
                }
            },
            error: function (request, error) {
                $("#Items-Added").modal("show");
                $("#itemaddheader").text('Something went wrong!');
                $("#message").text(error);
            }

        });
    });
    //get preorder



    //function getpre() {
    //    var _storeId = $("#ddlStoreDropdown option:selected").val();
    //    var Obj = {
    //        StoreId: _storeId
    //    }
    //    var Aurl = "/Storefront/GetPreOrderList";
    //    $.ajax({
    //        type: "GET",
    //        url: Aurl,
    //        data: Obj,
    //        success: function (Result) {
    //         //   console.log(Result);
    //            if (Result.data.length > 0) {
    //                var html = "";
    //                for (var i = 0; i < Result.data.length; i++) {
    //                    html += '<label>' + Result.data[i].title + ' </label><label> (' + Result.data[i].openTime + ' - ' + Result.data[i].closedTime + ')</label><td>&nbsp;&nbsp;&nbsp;<img src="/images/Edit-Square.png" onclick="fnEditschedule(' + Result.data[i].id + ')" data-toggle="modal" data-target="#EditSchedule"><span class="">&nbsp;&nbsp;&nbsp;<img onclick="deletepreActive(' + Result.data[i].id + ')" src ="/images/Delete2.png"></span></td>'
    //                    if (Result.data[i].days != null) {                            
    //                        var Days = Result.data[i].days.split(",");
    //                      //  console.log(Days);
    //                        html += '<div class="slot-area">';
    //                        for (var j = 0;j < Days.length; j++) {                                
    //                            if (Days[j] == "1") {                                    
    //                                html += '<div class="week-bx week-sm active">Mo</div>';
    //                            }
    //                            else if (Days[j] == "2") {
    //                                html += '<div class="week-bx week-sm active">Tu</div>';
    //                            }
    //                            else if (Days[j] == "3") {
    //                                html += '<div class="week-bx week-sm active">We</div>';
    //                            }
    //                            else if (Days[j] == "4") {                                    
    //                                html += '<div class="week-bx week-sm active">Th</div>';
    //                            }
    //                            else if (Days[j] == "5") {
    //                                html += '<div class="week-bx week-sm active">Fr</div>';
    //                            }
    //                            else if (Days[j] == "6") {
    //                                html += '<div class="week-bx week-sm active">Sa</div>';
    //                            }
    //                            else if (Days[j] == "7") {
    //                                html += '<div class="week-bx week-sm active">Su</div>';
    //                            }
    //                            else {
    //@*<div class="week-bx week-sm">Mo</div>
    //                                    <div class="week-bx week-sm">Mo</div>
    //                                    <div class="week-bx week-sm">Mo</div>
    //                                    <div class="week-bx week-sm">Mo</div>
    //                                    <div class="week-bx week-sm">Mo</div>*@
    //                                                                        }
    //                        }
    //                        html += '</div>';
    //                    }
    //                }
    //                $("#divpreorder").html(html);
    //            }
    //        }
    //    });
    //}
        function formatTime(dateString) {
            const date = new Date(dateString);
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }

    function getpre() {
        var _storeId = $("#ddlStoreDropdown option:selected").val();
        var Obj = {
            StoreId: _storeId
        };
        var Aurl = "/Storefront/GetPreOrderList";
        $.ajax({
            type: "GET",
            url: Aurl,
            data: Obj,
            success: function (Result) {
                if (Result.data.length > 0) {
                    var html = "";
                    for (var i = 0; i < Result.data.length; i++) {
                        var openTimeFormatted = formatTime(Result.data[i].openTime);
                        var closedTimeFormatted = formatTime(Result.data[i].closedTime);

                        html += '<label>' + Result.data[i].title + ' </label><label> (' + openTimeFormatted + ' - ' + closedTimeFormatted + ')</label><td>&nbsp;&nbsp;&nbsp;<img src="/images/Edit-Square.png" onclick="fnEditschedule(' + Result.data[i].id + ')" data-toggle="modal" data-target="#EditSchedule"><span class="">&nbsp;&nbsp;&nbsp;<img onclick="deletepreActive(' + Result.data[i].id + ')" src ="/images/Delete2.png"></span></td>';
                        if (Result.data[i].days != null) {
                            var Days = Result.data[i].days.split(",");
                            html += '<div class="slot-area">';
                            for (var j = 0; j < Days.length; j++) {
                                if (Days[j] == "1") {
                                    html += '<div class="week-bx week-sm active">Mo</div>';
                                }
                                else if (Days[j] == "2") {
                                    html += '<div class="week-bx week-sm active">Tu</div>';
                                }
                                else if (Days[j] == "3") {
                                    html += '<div class="week-bx week-sm active">We</div>';
                                }
                                else if (Days[j] == "4") {
                                    html += '<div class="week-bx week-sm active">Th</div>';
                                }
                                else if (Days[j] == "5") {
                                    html += '<div class="week-bx week-sm active">Fr</div>';
                                }
                                else if (Days[j] == "6") {
                                    html += '<div class="week-bx week-sm active">Sa</div>';
                                }
                                else if (Days[j] == "7") {
                                    html += '<div class="week-bx week-sm active">Su</div>';
                                }
                            }
                            html += '</div>';
                        }
                    }
                    $("#divpreorder").html(html);
                }
            }
        });
    }



    ///STORE UPDATE
    $(document).on("click", "#BtnUpdateStore", function () {
     if (!$("#StoreImages").val()) {
                if ($("#StoreImages").parent().next(".validation").length == 0) // only add if not added
                {
                    $("#StoreImages").parent().after("<!--<div class='validation' style='color:red;margin-bottom: 20px;'>Please select image</div>-->");
                    return isValid = false;
                }
            } else {
                $("#StoreImages").parent().next(".validation").remove();
            }            
        var StoreId = $("#ddlStoreDropdown").val();
        
        var StoreDisplayName = $("#txtStoreNames").val();
     //   var DisplayImage = $("#txtimageNames").val();
        var Images = document.getElementById("StoreImages");
        var imgg = Images.files[0];

        var formData = new FormData();
        formData.append("Id", StoreId);
        formData.append("StoreDisplayName", StoreDisplayName);
       // formData.append("DisplayImage", DisplayImage);
        formData.append("Mediafile", imgg);
        var Aurl = "/Storefront/StoreUpdate";

        $.ajax({
            type: "Post",
            url: Aurl,
            cache: false,
            contentType: false,
            processData: false,
            data: formData,
            dataType: "json",
            success: function (Result) {
                var status = Result.success;
                if (status == true) {

                    $("#updateStore").modal("hide");
                    $("#Topjop-Update").modal("show");
                    $("#EventUpdateHeading").text("Top job!");
                    $("#eventUpdatemessage").text("You’ve successfully updated this store.");
                    window.location.reload();
                
                }
                else {
                    $("#Topjop-Update").modal("show");
                    $("#EventUpdateHeading").text("Oops!");
                    $("#eventUpdatemessage").text(Result.message);
                    //  $("#message").text(Result.message);
                }
            },  
            error: function (request, error) {
                $("#Topjop-Update").modal("show");
                $("#EventUpdateHeading").text("Oops!");
                $("#eventUpdatemessage").text("Something went wrong");
            }
        });

    });

    $(document).on("click", "#editstoredetails", function () {
    var Storename = $("#ddlStoreDropdown option:selected").text();
        //alert(Storename);
        $("#txtStoreNames").val(Storename);
    });
</script>

<style>
    .vehicle-list-storefont .circle-box li.active .circle-icon {
        border: 6px solid rgba(52, 239, 211, 1);
    }
</style>
